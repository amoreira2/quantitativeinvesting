
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cross-Classifying by More than One Variable &#8212; Quantitative Investing</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/book.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="canonical" href="https://amoreira2.github.io/quantitativeinvesting/notused/08/3/Cross-Classifying_by_More_than_One_Variable.html" />
    <link rel="shortcut icon" href="../../../_static/figuremain2.jpg"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
      <img src="../../../_static/figuremain2.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Quantitative Investing</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <p class="caption">
 <span class="caption-text">
  Course Intro
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/01/what-is-quant-investing.html">
   1. What is Quantitative Investing?
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/01/statistical-techniques.html">
     1.1. Statistical Techniques
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/01/computational-tools.html">
     1.2. Computational Tools
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/02/getting_started.html">
   Getting Started
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/02/local_install.html">
     1. Local Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/02/cloud_setup.html">
     2. Cloud Setup
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Python
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/03/programming-in-python.html">
   1. Programming in Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/03/1/Expressions.html">
     1.1. Expressions
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../chapters/03/2/Names.html">
     1.2. Names
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/03/2/1/Growth.html">
       1.2.1. Example: Growth Rates
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/03/3/Calls.html">
     1.3. Call Expressions
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../chapters/03/4/Data_Types.html">
     1.4. Data Types
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/03/4/1/Numbers.html">
       1.4.1. Numbers
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/03/4/2/Strings.html">
       1.4.2. Strings
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../chapters/03/5/Sequences.html">
     Sequences
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/03/5/1/Arrays.html">
       1. Arrays
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/03/5/2/Ranges.html">
       2. Ranges
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/03/5/3/More_on_Arrays.html">
       3. More on Arrays
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/essentials/essentials.html">
   Python essentials
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/essentials/basics.html">
     1. Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/essentials/collections.html">
     2. Collections
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/essentials/control_flow.html">
     3. Control Flow
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/essentials/functions.html">
     4. Functions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/scientific/intro.html">
   2. Scientific Computing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/scientific/numpy1.html">
     2.1. Introduction to Numpy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/scientific/plotting1.html">
     2.2. Plotting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/scientific/linear_algebra1.html">
     2.3. Applied Linear Algebra
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/scientific/randomness1.html">
     2.4. Randomness
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/pandas/workingwithdata.html">
   3. Working with Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/pandas/intro.html">
     3.1. Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/pandas/basics.html">
     3.2. Pandas Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/pandas/the_index.html">
     3.3. Indexing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/pandas/data_clean.html">
     3.4. Cleaning data (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/pandas/reshape.html">
     3.5. Reshape (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/pandas/merge.html">
     3.6. Merge (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/pandas/groupby.html">
     3.7. Group-by (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/pandas/timeseries.html">
     3.8. Time-Series
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/pandas/matplotlib.html">
     3.9. Plotting (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/pandas/storage_formats.html">
     3.10. Data Storage (opt)
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Finance
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/Finance/Returns.html">
   1. Asset Returns
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/TheChoiceofFrequency.html">
     1.1. The Choice of Frequency and Annualization of Returns
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../chapters/Finance/PortfolioMath.html">
   2. Portfolio Math
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/Finance/CapitalAllocationLine.html">
   Capital Allocation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/UsingAPI.html">
     1. Using APIs
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/Finance/MeanVariance.html">
   3. Mean Variance Efficient Portfolios
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/CaseStudy.html">
     3.1. Case Study in International Diversification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/LeverageandShorting.html">
     3.2. Leverage and Shorting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/Portfoliooptimizationwithconstraints.html">
     3.3. Portfolio Optimization with constraints
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../chapters/Finance/EstimationUncertainty.html">
   4. Estimation Uncertainty and It's Implications for investing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../chapters/Finance/TradingStrategies.html">
   5. Trading Strategies
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/Finance/Timing.html">
   Timing Strategies
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/Volatilitytiming.html">
     1. Volatility Timing
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/Finance/crosssectionalequitystrategies.html">
   Cross-Sectional Equity Strategies
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/Valueinvesting.html">
     1. Value
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/Momentum.html">
     2. Momentum
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/OtherEquityStrategies.html">
     3. Other Equity strategies
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/Finance/Evaluation.html">
   6. Evaluating a Trading Strategy
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/Econometrics.html">
     6.1. The Econometrics of Strategy Evalaution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/outofsample.html">
     6.2. Out of Sample Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/TailandBackground.html">
     6.3. Tail Risks and Background Risks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/MultiFactorModels.html">
     6.4. Multifactor Models
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/Finance/Topics.html">
   7. Topics in Quantitative Investing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/Equilbrium.html">
     7.1. Intepreting Factor models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/Implementation.html">
     7.2. Strategy Implementation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../chapters/Finance/Horizon.html">
     7.3. Investment horizon effects
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Additional Statistics Material
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../chapters/additional/additional.html">
   1. Additional Statistics Material
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../chapters/additional/10/Sampling_and_Empirical_Distributions.html">
     Sampling and Empirical Distributions
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
    <label for="toctree-checkbox-18">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/10/1/Empirical_Distributions.html">
       1. Empirical Distributions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/10/2/Sampling_from_a_Population.html">
       2. Sampling from a Population
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/10/3/Empirical_Distribution_of_a_Statistic.html">
       3. Empirical Distibution of a Statistic
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../chapters/additional/11/Testing_Hypotheses.html">
     1.2. Testing Hypotheses
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
    <label for="toctree-checkbox-19">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/11/1/Assessing_Models.html">
       1.2.1. Assessing Models
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/11/2/Multiple_Categories.html">
       1.2.2. Multiple Categories
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/11/3/Decisions_and_Uncertainty.html">
       1.2.3. Decisions and Uncertainty
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/11/4/Error_Probabilities.html">
       1.2.4. Error Probabilities
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../chapters/additional/13/Estimation.html">
     1.3. Estimation
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
    <label for="toctree-checkbox-20">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/13/1/Percentiles.html">
       1.3.1. Percentiles
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/13/2/Bootstrap.html">
       1.3.2. The Bootstrap
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/13/3/Confidence_Intervals.html">
       1.3.3. Confidence Intervals
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/13/4/Using_Confidence_Intervals.html">
       1.3.4. Using Confidence Intervals
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../chapters/additional/14/Why_the_Mean_Matters.html">
     Why the Mean Matters
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
    <label for="toctree-checkbox-21">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/14/1/Properties_of_the_Mean.html">
       1. Properties of the Mean
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/14/2/Variability.html">
       2. Variability
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/14/3/SD_and_the_Normal_Curve.html">
       3. The SD and the Normal Curve
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/14/4/Central_Limit_Theorem.html">
       4. The Central Limit Theorem
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/14/5/Variability_of_the_Sample_Mean.html">
       5. The Variability of the Sample Mean
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/14/6/Choosing_a_Sample_Size.html">
       6. Choosing a Sample Size
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../chapters/additional/15/Prediction.html">
     1.4. Prediction
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/>
    <label for="toctree-checkbox-22">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/15/1/Correlation.html">
       1.4.1. Correlation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/15/2/Regression_Line.html">
       1.4.2. The Regression Line
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/15/3/Method_of_Least_Squares.html">
       1.4.3. The Method of Least Squares
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/15/4/Least_Squares_Regression.html">
       1.4.4. Least Squares Regression
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/15/5/Visual_Diagnostics.html">
       1.4.5. Visual Diagnostics
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/15/6/Numerical_Diagnostics.html">
       1.4.6. Numerical Diagnostics
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../chapters/additional/16/Inference_for_Regression.html">
     1.5. Inference for Regression
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/>
    <label for="toctree-checkbox-23">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/16/1/Regression_Model.html">
       1.5.1. A Regression Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/16/2/Inference_for_the_True_Slope.html">
       1.5.2. Inference for the True Slope
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../chapters/additional/16/3/Prediction_Intervals.html">
       1.5.3. Prediction Intervals
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../_sources/notused/08/3/Cross-Classifying_by_More_than_One_Variable.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/amoreira2/Lectures"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/amoreira2/Lectures/issues/new?title=Issue%20on%20page%20%2Fnotused/08/3/Cross-Classifying_by_More_than_One_Variable.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/amoreira2/Lectures/main?urlpath=lab/tree/notused/08/3/Cross-Classifying_by_More_than_One_Variable.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        <a class="jupyterhub-button" href="https://pims.syzygy.ca/jupyter/hub/user-redirect/git-pull?repo=https://github.com/amoreira2/Lectures&urlpath=lab/tree/Lectures/notused/08/3/Cross-Classifying_by_More_than_One_Variable.ipynb&branch=main"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/amoreira2/Lectures/blob/main/notused/08/3/Cross-Classifying_by_More_than_One_Variable.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#two-variables-counting-the-number-in-each-paired-category">
   Two Variables: Counting the Number in Each Paired Category
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#two-variables-finding-a-characteristic-of-each-paired-category">
   Two Variables: Finding a Characteristic of Each Paired Category
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pivot-tables-rearranging-the-output-of-group">
   Pivot Tables: Rearranging the Output of
   <code class="docutils literal notranslate">
    <span class="pre">
     group
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example-education-and-income-of-californian-adults">
   Example: Education and Income of Californian Adults
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="cell tag_remove-input docutils container">
</div>
<div class="section" id="cross-classifying-by-more-than-one-variable">
<h1>Cross-Classifying by More than One Variable<a class="headerlink" href="#cross-classifying-by-more-than-one-variable" title="Permalink to this headline">¶</a></h1>
<p>When individuals have multiple features, there are many different ways to classify them. For example, if we have a population of college students for each of whom we have recorded a major and the number of years in college, then the students could be classified by major, or by year, or by a combination of major and year.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">group</span></code> method also allows us to classify individuals according to multiple variables. This is called <em>cross-classifying</em>.</p>
<div class="section" id="two-variables-counting-the-number-in-each-paired-category">
<h2>Two Variables: Counting the Number in Each Paired Category<a class="headerlink" href="#two-variables-counting-the-number-in-each-paired-category" title="Permalink to this headline">¶</a></h2>
<p>The table <code class="docutils literal notranslate"><span class="pre">more_cones</span></code> records the flavor, color, and price of six ice cream cones.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">more_cones</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="s1">&#39;Flavor&#39;</span><span class="p">,</span> <span class="n">make_array</span><span class="p">(</span><span class="s1">&#39;strawberry&#39;</span><span class="p">,</span> <span class="s1">&#39;chocolate&#39;</span><span class="p">,</span> <span class="s1">&#39;chocolate&#39;</span><span class="p">,</span> <span class="s1">&#39;strawberry&#39;</span><span class="p">,</span> <span class="s1">&#39;chocolate&#39;</span><span class="p">,</span> <span class="s1">&#39;bubblegum&#39;</span><span class="p">),</span>
    <span class="s1">&#39;Color&#39;</span><span class="p">,</span> <span class="n">make_array</span><span class="p">(</span><span class="s1">&#39;pink&#39;</span><span class="p">,</span> <span class="s1">&#39;light brown&#39;</span><span class="p">,</span> <span class="s1">&#39;dark brown&#39;</span><span class="p">,</span> <span class="s1">&#39;pink&#39;</span><span class="p">,</span> <span class="s1">&#39;dark brown&#39;</span><span class="p">,</span> <span class="s1">&#39;pink&#39;</span><span class="p">),</span>
    <span class="s1">&#39;Price&#39;</span><span class="p">,</span> <span class="n">make_array</span><span class="p">(</span><span class="mf">3.55</span><span class="p">,</span> <span class="mf">4.75</span><span class="p">,</span> <span class="mf">5.25</span><span class="p">,</span> <span class="mf">5.25</span><span class="p">,</span> <span class="mf">5.25</span><span class="p">,</span> <span class="mf">4.75</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">more_cones</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Flavor</th> <th>Color</th> <th>Price</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>strawberry</td> <td>pink       </td> <td>3.55 </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>light brown</td> <td>4.75 </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>dark brown </td> <td>5.25 </td>
        </tr>
        <tr>
            <td>strawberry</td> <td>pink       </td> <td>5.25 </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>dark brown </td> <td>5.25 </td>
        </tr>
        <tr>
            <td>bubblegum </td> <td>pink       </td> <td>4.75 </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p>We know how to use <code class="docutils literal notranslate"><span class="pre">group</span></code> to count the number of cones of each flavor:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">more_cones</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;Flavor&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Flavor</th> <th>count</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>bubblegum </td> <td>1    </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>3    </td>
        </tr>
        <tr>
            <td>strawberry</td> <td>2    </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p>But now each cone has a color as well. To classify the cones by both flavor and color, we will pass a list of labels as an argument to <code class="docutils literal notranslate"><span class="pre">group</span></code>. The resulting table has one row for every <em>unique combination</em> of values that appear together in the grouped columns. As before, a single argument (a list, in this case, but an array would work too) gives row counts.</p>
<p>Although there are six cones, there are only four unique combinations of flavor and color. Two of the cones were dark brown chocolate, and two pink strawberry.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">more_cones</span><span class="o">.</span><span class="n">group</span><span class="p">([</span><span class="s1">&#39;Flavor&#39;</span><span class="p">,</span> <span class="s1">&#39;Color&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Flavor</th> <th>Color</th> <th>count</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>bubblegum </td> <td>pink       </td> <td>1    </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>dark brown </td> <td>2    </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>light brown</td> <td>1    </td>
        </tr>
        <tr>
            <td>strawberry</td> <td>pink       </td> <td>2    </td>
        </tr>
    </tbody>
</table></div></div>
</div>
</div>
<div class="section" id="two-variables-finding-a-characteristic-of-each-paired-category">
<h2>Two Variables: Finding a Characteristic of Each Paired Category<a class="headerlink" href="#two-variables-finding-a-characteristic-of-each-paired-category" title="Permalink to this headline">¶</a></h2>
<p>A second argument aggregates all other columns that are not in the list of grouped columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">more_cones</span><span class="o">.</span><span class="n">group</span><span class="p">([</span><span class="s1">&#39;Flavor&#39;</span><span class="p">,</span> <span class="s1">&#39;Color&#39;</span><span class="p">],</span> <span class="nb">sum</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Flavor</th> <th>Color</th> <th>Price sum</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>bubblegum </td> <td>pink       </td> <td>4.75     </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>dark brown </td> <td>10.5     </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>light brown</td> <td>4.75     </td>
        </tr>
        <tr>
            <td>strawberry</td> <td>pink       </td> <td>8.8      </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p><strong>Three or More Variables.</strong> You can use <code class="docutils literal notranslate"><span class="pre">group</span></code> to classify rows by three or more categorical variables. Just include them all in the list that is the first argument. But cross-classifying by multiple variables can become complex, as the number of distinct combinations of categories can be quite large.</p>
</div>
<div class="section" id="pivot-tables-rearranging-the-output-of-group">
<h2>Pivot Tables: Rearranging the Output of <code class="docutils literal notranslate"><span class="pre">group</span></code><a class="headerlink" href="#pivot-tables-rearranging-the-output-of-group" title="Permalink to this headline">¶</a></h2>
<p>Many uses of cross-classification involve just two categorical variables, like <code class="docutils literal notranslate"><span class="pre">Flavor</span></code> and <code class="docutils literal notranslate"><span class="pre">Color</span></code> in the example above. In these cases it is possible to display the results of the classification in a different kind of table, called a <em>pivot table</em>. Pivot tables, also known as <em>contingency tables</em>, make it easier to work with data that have been classified according to two variables.</p>
<p>Recall the use of <code class="docutils literal notranslate"><span class="pre">group</span></code> to count the number of cones in each paired category of flavor and color:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">more_cones</span><span class="o">.</span><span class="n">group</span><span class="p">([</span><span class="s1">&#39;Flavor&#39;</span><span class="p">,</span> <span class="s1">&#39;Color&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Flavor</th> <th>Color</th> <th>count</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>bubblegum </td> <td>pink       </td> <td>1    </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>dark brown </td> <td>2    </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>light brown</td> <td>1    </td>
        </tr>
        <tr>
            <td>strawberry</td> <td>pink       </td> <td>2    </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p>The same data can be displayed differenly using the Table method <code class="docutils literal notranslate"><span class="pre">pivot</span></code>. Ignore the code for a moment, and just examine the table of outcomes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">more_cones</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s1">&#39;Flavor&#39;</span><span class="p">,</span> <span class="s1">&#39;Color&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Color</th> <th>bubblegum</th> <th>chocolate</th> <th>strawberry</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>dark brown </td> <td>0        </td> <td>2        </td> <td>0         </td>
        </tr>
        <tr>
            <td>light brown</td> <td>0        </td> <td>1        </td> <td>0         </td>
        </tr>
        <tr>
            <td>pink       </td> <td>1        </td> <td>0        </td> <td>2         </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p>Notice how this table displays all nine possible pairs of flavor and color, including pairs like “dark brown bubblegum” that don’t exist in our data. Notice also that the count in each pair appears in the body of the table: to find the number of light brown chocolate cones, run your eye along the row <code class="docutils literal notranslate"><span class="pre">light</span> <span class="pre">brown</span></code> until it meets the column <code class="docutils literal notranslate"><span class="pre">chocolate</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">group</span></code> method takes a list of two labels because it is flexible: it could take one or three or more. On the other hand, <code class="docutils literal notranslate"><span class="pre">pivot</span></code> always takes two column labels, one to determine the columns and one to determine the rows.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">pivot</span></code></strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">pivot</span></code> method is closely related to the <code class="docutils literal notranslate"><span class="pre">group</span></code> method: it groups together rows that share a combination of values. It differs from <code class="docutils literal notranslate"><span class="pre">group</span></code> because it organizes the resulting values in a grid. The first argument to <code class="docutils literal notranslate"><span class="pre">pivot</span></code> is the label of a column that contains the values that will be used to form new columns in the result. The second argument is the label of a column used for the rows. The result gives the count of all rows of the original table that share the combination of column and row values.</p>
<p>Like <code class="docutils literal notranslate"><span class="pre">group</span></code>, <code class="docutils literal notranslate"><span class="pre">pivot</span></code> can be used with additional arguments to find characteristics of each paired category. An optional third argument called <code class="docutils literal notranslate"><span class="pre">values</span></code> indicates a column of values that will replace the counts in each cell of the grid. All of these values will not be displayed, however; the fourth argument <code class="docutils literal notranslate"><span class="pre">collect</span></code> indicates how to collect them all into one aggregated value to be displayed in the cell.</p>
<p>An example will help clarify this. Here is <code class="docutils literal notranslate"><span class="pre">pivot</span></code> being used to find the total price of the cones in each cell.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">more_cones</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s1">&#39;Flavor&#39;</span><span class="p">,</span> <span class="s1">&#39;Color&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Price&#39;</span><span class="p">,</span> <span class="n">collect</span><span class="o">=</span><span class="nb">sum</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Color</th> <th>bubblegum</th> <th>chocolate</th> <th>strawberry</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>dark brown </td> <td>0        </td> <td>10.5     </td> <td>0         </td>
        </tr>
        <tr>
            <td>light brown</td> <td>0        </td> <td>4.75     </td> <td>0         </td>
        </tr>
        <tr>
            <td>pink       </td> <td>4.75     </td> <td>0        </td> <td>8.8       </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p>And here is <code class="docutils literal notranslate"><span class="pre">group</span></code> doing the same thing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">more_cones</span><span class="o">.</span><span class="n">group</span><span class="p">([</span><span class="s1">&#39;Flavor&#39;</span><span class="p">,</span> <span class="s1">&#39;Color&#39;</span><span class="p">],</span> <span class="nb">sum</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Flavor</th> <th>Color</th> <th>Price sum</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>bubblegum </td> <td>pink       </td> <td>4.75     </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>dark brown </td> <td>10.5     </td>
        </tr>
        <tr>
            <td>chocolate </td> <td>light brown</td> <td>4.75     </td>
        </tr>
        <tr>
            <td>strawberry</td> <td>pink       </td> <td>8.8      </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p>Though the numbers in both tables are the same, table produced by <code class="docutils literal notranslate"><span class="pre">pivot</span></code> is easier to read and lends itself more easily to analysis. The advantage of <code class="docutils literal notranslate"><span class="pre">pivot</span></code> is that it places grouped values into adjacent columns, so that they can be combined and compared.</p>
</div>
<div class="section" id="example-education-and-income-of-californian-adults">
<h2>Example: Education and Income of Californian Adults<a class="headerlink" href="#example-education-and-income-of-californian-adults" title="Permalink to this headline">¶</a></h2>
<p>The State of California’s Open Data Portal is a rich source of information about the lives of Californians. It is our source of a <a class="reference external" href="http://data.ca.gov/dataset/ca-educational-attainment-personal-income">dataset</a> on educational attainment and personal income among Californians over the years 2008 to 2014. The data are derived from the U.S. Census Current Population Survey.</p>
<p>For each year, the table records the <code class="docutils literal notranslate"><span class="pre">Population</span> <span class="pre">Count</span></code> of Californians in many different combinations of age, gender, educational attainment, and personal income. We will study only the data for the year 2014.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">full_table</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="n">path_data</span> <span class="o">+</span> <span class="s1">&#39;educ_inc.csv&#39;</span><span class="p">)</span>
<span class="n">ca_2014</span> <span class="o">=</span> <span class="n">full_table</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">are</span><span class="o">.</span><span class="n">equal_to</span><span class="p">(</span><span class="s1">&#39;1/1/14 0:00&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="n">are</span><span class="o">.</span><span class="n">not_equal_to</span><span class="p">(</span><span class="s1">&#39;00 to 17&#39;</span><span class="p">))</span>
<span class="n">ca_2014</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Year</th> <th>Age</th> <th>Gender</th> <th>Educational Attainment</th> <th>Personal Income</th> <th>Population Count</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1/1/14 0:00</td> <td>18 to 64 </td> <td>Female</td> <td>No high school diploma        </td> <td>H: 75,000 and over </td> <td>2058            </td>
        </tr>
        <tr>
            <td>1/1/14 0:00</td> <td>65 to 80+</td> <td>Male  </td> <td>No high school diploma        </td> <td>H: 75,000 and over </td> <td>2153            </td>
        </tr>
        <tr>
            <td>1/1/14 0:00</td> <td>65 to 80+</td> <td>Female</td> <td>No high school diploma        </td> <td>G: 50,000 to 74,999</td> <td>4666            </td>
        </tr>
        <tr>
            <td>1/1/14 0:00</td> <td>65 to 80+</td> <td>Female</td> <td>High school or equivalent     </td> <td>H: 75,000 and over </td> <td>7122            </td>
        </tr>
        <tr>
            <td>1/1/14 0:00</td> <td>65 to 80+</td> <td>Female</td> <td>No high school diploma        </td> <td>F: 35,000 to 49,999</td> <td>7261            </td>
        </tr>
        <tr>
            <td>1/1/14 0:00</td> <td>65 to 80+</td> <td>Male  </td> <td>No high school diploma        </td> <td>G: 50,000 to 74,999</td> <td>8569            </td>
        </tr>
        <tr>
            <td>1/1/14 0:00</td> <td>18 to 64 </td> <td>Female</td> <td>No high school diploma        </td> <td>G: 50,000 to 74,999</td> <td>14635           </td>
        </tr>
        <tr>
            <td>1/1/14 0:00</td> <td>65 to 80+</td> <td>Male  </td> <td>No high school diploma        </td> <td>F: 35,000 to 49,999</td> <td>15212           </td>
        </tr>
        <tr>
            <td>1/1/14 0:00</td> <td>65 to 80+</td> <td>Male  </td> <td>College, less than 4-yr degree</td> <td>B: 5,000 to 9,999  </td> <td>15423           </td>
        </tr>
        <tr>
            <td>1/1/14 0:00</td> <td>65 to 80+</td> <td>Female</td> <td>Bachelor's degree or higher   </td> <td>A: 0 to 4,999      </td> <td>15459           </td>
        </tr>
    </tbody>
</table>
<p>... (117 rows omitted)</p></div></div>
</div>
<p>Each row of the table corresponds to a combination of age, gender, educational level, and income. There are 127 such combinations in all!</p>
<p>As a first step it is a good idea to start with just one or two variables. We will focus on just one pair: educational attainment and personal income.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">educ_inc</span> <span class="o">=</span> <span class="n">ca_2014</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;Educational Attainment&#39;</span><span class="p">,</span> <span class="s1">&#39;Personal Income&#39;</span><span class="p">,</span> <span class="s1">&#39;Population Count&#39;</span><span class="p">)</span>
<span class="n">educ_inc</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Educational Attainment</th> <th>Personal Income</th> <th>Population Count</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>No high school diploma        </td> <td>H: 75,000 and over </td> <td>2058            </td>
        </tr>
        <tr>
            <td>No high school diploma        </td> <td>H: 75,000 and over </td> <td>2153            </td>
        </tr>
        <tr>
            <td>No high school diploma        </td> <td>G: 50,000 to 74,999</td> <td>4666            </td>
        </tr>
        <tr>
            <td>High school or equivalent     </td> <td>H: 75,000 and over </td> <td>7122            </td>
        </tr>
        <tr>
            <td>No high school diploma        </td> <td>F: 35,000 to 49,999</td> <td>7261            </td>
        </tr>
        <tr>
            <td>No high school diploma        </td> <td>G: 50,000 to 74,999</td> <td>8569            </td>
        </tr>
        <tr>
            <td>No high school diploma        </td> <td>G: 50,000 to 74,999</td> <td>14635           </td>
        </tr>
        <tr>
            <td>No high school diploma        </td> <td>F: 35,000 to 49,999</td> <td>15212           </td>
        </tr>
        <tr>
            <td>College, less than 4-yr degree</td> <td>B: 5,000 to 9,999  </td> <td>15423           </td>
        </tr>
        <tr>
            <td>Bachelor's degree or higher   </td> <td>A: 0 to 4,999      </td> <td>15459           </td>
        </tr>
    </tbody>
</table>
<p>... (117 rows omitted)</p></div></div>
</div>
<p>Let’s start by looking at educational level alone. The categories of this variable have been subdivided by the different levels of income. So we will group the table by <code class="docutils literal notranslate"><span class="pre">Educational</span> <span class="pre">Attainment</span></code> and <code class="docutils literal notranslate"><span class="pre">sum</span></code> the <code class="docutils literal notranslate"><span class="pre">Population</span> <span class="pre">Count</span></code> in each category.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">education</span> <span class="o">=</span> <span class="n">educ_inc</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;Educational Attainment&#39;</span><span class="p">,</span> <span class="s1">&#39;Population Count&#39;</span><span class="p">)</span>
<span class="n">educ_totals</span> <span class="o">=</span> <span class="n">education</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;Educational Attainment&#39;</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
<span class="n">educ_totals</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Educational Attainment</th> <th>Population Count sum</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Bachelor's degree or higher   </td> <td>8525698             </td>
        </tr>
        <tr>
            <td>College, less than 4-yr degree</td> <td>7775497             </td>
        </tr>
        <tr>
            <td>High school or equivalent     </td> <td>6294141             </td>
        </tr>
        <tr>
            <td>No high school diploma        </td> <td>4258277             </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p>There are only four categories of educational attainment. The counts are so large that is is more helpful to look at percents. For this, we will use the function <code class="docutils literal notranslate"><span class="pre">percents</span></code> that we defined in an earlier section. It converts an array of numbers to an array of percents out of the total in the input array.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">percents</span><span class="p">(</span><span class="n">array_x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span> <span class="p">(</span><span class="n">array_x</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">array_x</span><span class="p">))</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We now have the distribution of educational attainment among adult Californians. More than 30% have a Bachelor’s degree or higher, while almost 16% lack a high school diploma.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">educ_distribution</span> <span class="o">=</span> <span class="n">educ_totals</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s1">&#39;Population Percent&#39;</span><span class="p">,</span> <span class="n">percents</span><span class="p">(</span><span class="n">educ_totals</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="p">)</span>
<span class="n">educ_distribution</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Educational Attainment</th> <th>Population Count sum</th> <th>Population Percent</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Bachelor's degree or higher   </td> <td>8525698             </td> <td>31.75             </td>
        </tr>
        <tr>
            <td>College, less than 4-yr degree</td> <td>7775497             </td> <td>28.96             </td>
        </tr>
        <tr>
            <td>High school or equivalent     </td> <td>6294141             </td> <td>23.44             </td>
        </tr>
        <tr>
            <td>No high school diploma        </td> <td>4258277             </td> <td>15.86             </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p>By using <code class="docutils literal notranslate"><span class="pre">pivot</span></code>, we can get a contingency table (a table of counts) of adult Californians cross-classified by <code class="docutils literal notranslate"><span class="pre">Educational</span> <span class="pre">Attainment</span></code> and <code class="docutils literal notranslate"><span class="pre">Personal</span> <span class="pre">Income</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">totals</span> <span class="o">=</span> <span class="n">educ_inc</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s1">&#39;Educational Attainment&#39;</span><span class="p">,</span> <span class="s1">&#39;Personal Income&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Population Count&#39;</span><span class="p">,</span> <span class="n">collect</span><span class="o">=</span><span class="nb">sum</span><span class="p">)</span>
<span class="n">totals</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Personal Income</th> <th>Bachelor's degree or higher</th> <th>College, less than 4-yr degree</th> <th>High school or equivalent</th> <th>No high school diploma</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>A: 0 to 4,999      </td> <td>575491                     </td> <td>985011                        </td> <td>1161873                  </td> <td>1204529               </td>
        </tr>
        <tr>
            <td>B: 5,000 to 9,999  </td> <td>326020                     </td> <td>810641                        </td> <td>626499                   </td> <td>597039                </td>
        </tr>
        <tr>
            <td>C: 10,000 to 14,999</td> <td>452449                     </td> <td>798596                        </td> <td>692661                   </td> <td>664607                </td>
        </tr>
        <tr>
            <td>D: 15,000 to 24,999</td> <td>773684                     </td> <td>1345257                       </td> <td>1252377                  </td> <td>875498                </td>
        </tr>
        <tr>
            <td>E: 25,000 to 34,999</td> <td>693884                     </td> <td>1091642                       </td> <td>929218                   </td> <td>464564                </td>
        </tr>
        <tr>
            <td>F: 35,000 to 49,999</td> <td>1122791                    </td> <td>1112421                       </td> <td>782804                   </td> <td>260579                </td>
        </tr>
        <tr>
            <td>G: 50,000 to 74,999</td> <td>1594681                    </td> <td>883826                        </td> <td>525517                   </td> <td>132516                </td>
        </tr>
        <tr>
            <td>H: 75,000 and over </td> <td>2986698                    </td> <td>748103                        </td> <td>323192                   </td> <td>58945                 </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p>Here you see the power of <code class="docutils literal notranslate"><span class="pre">pivot</span></code> over other cross-classification methods. Each column of counts is a distribution of personal income at a specific level of educational attainment. Converting the counts to percents allows us to compare the four distributions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">distributions</span> <span class="o">=</span> <span class="n">totals</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
    <span class="s2">&quot;Bachelor&#39;s degree or higher&quot;</span><span class="p">,</span> <span class="n">percents</span><span class="p">(</span><span class="n">totals</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span>
    <span class="s1">&#39;College, less than 4-yr degree&#39;</span><span class="p">,</span> <span class="n">percents</span><span class="p">(</span><span class="n">totals</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span>
    <span class="s1">&#39;High school or equivalent&#39;</span><span class="p">,</span> <span class="n">percents</span><span class="p">(</span><span class="n">totals</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">3</span><span class="p">)),</span>
    <span class="s1">&#39;No high school diploma&#39;</span><span class="p">,</span> <span class="n">percents</span><span class="p">(</span><span class="n">totals</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>   
    <span class="p">)</span>

<span class="n">distributions</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Personal Income</th> <th>Bachelor's degree or higher</th> <th>College, less than 4-yr degree</th> <th>High school or equivalent</th> <th>No high school diploma</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>A: 0 to 4,999      </td> <td>6.75                       </td> <td>12.67                         </td> <td>18.46                    </td> <td>28.29                 </td>
        </tr>
        <tr>
            <td>B: 5,000 to 9,999  </td> <td>3.82                       </td> <td>10.43                         </td> <td>9.95                     </td> <td>14.02                 </td>
        </tr>
        <tr>
            <td>C: 10,000 to 14,999</td> <td>5.31                       </td> <td>10.27                         </td> <td>11                       </td> <td>15.61                 </td>
        </tr>
        <tr>
            <td>D: 15,000 to 24,999</td> <td>9.07                       </td> <td>17.3                          </td> <td>19.9                     </td> <td>20.56                 </td>
        </tr>
        <tr>
            <td>E: 25,000 to 34,999</td> <td>8.14                       </td> <td>14.04                         </td> <td>14.76                    </td> <td>10.91                 </td>
        </tr>
        <tr>
            <td>F: 35,000 to 49,999</td> <td>13.17                      </td> <td>14.31                         </td> <td>12.44                    </td> <td>6.12                  </td>
        </tr>
        <tr>
            <td>G: 50,000 to 74,999</td> <td>18.7                       </td> <td>11.37                         </td> <td>8.35                     </td> <td>3.11                  </td>
        </tr>
        <tr>
            <td>H: 75,000 and over </td> <td>35.03                      </td> <td>9.62                          </td> <td>5.13                     </td> <td>1.38                  </td>
        </tr>
    </tbody>
</table></div></div>
</div>
<p>At a glance, you can see that over 35% of those with Bachelor’s degrees or higher had incomes of <span class="math notranslate nohighlight">\(\$75,000\)</span> and over, whereas fewer than 10% of the people in the other education categories had that level of income.</p>
<p>The bar chart below compares the personal income distributions of adult Californians who have no high school diploma with those who have completed a Bachelor’s degree or higher. The difference in the distributions is striking. There is a clear positive association between educational attainment and personal income.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">distributions</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/Cross-Classifying_by_More_than_One_Variable_37_0.png" src="../../../_images/Cross-Classifying_by_More_than_One_Variable_37_0.png" />
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notused/08/3"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Alan Moreira<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>