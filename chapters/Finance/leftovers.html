
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Log returns and Simple returns &#8212; Quantitative Investing</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/book.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="canonical" href="https://amoreira2.github.io/quantitativeinvesting/chapters/Finance/leftovers.html" />
    <link rel="shortcut icon" href="../../_static/figuremain2.jpg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      <img src="../../_static/figuremain2.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Quantitative Investing</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01/what-is-quant-investing.html">
   1. What is Quantitative Investing?
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/statistical-techniques.html">
     1.1. Statistical Techniques
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/computational-tools.html">
     1.2. Computational tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/Finance.html">
     1.3. Finance
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02/getting_started.html">
   2. Getting Started
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/local_install.html">
     2.2.1. Local installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/cloud_setup.html">
     2.2.2. Cloud Setup
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03/programming-in-python.html">
   3. First Steps with Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/1/Expressions.html">
     3.1. Expressions
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../03/2/Names.html">
     3.2. Names
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../03/2/1/Growth.html">
       3.2.1. Example: Growth Rates
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/3/Calls.html">
     3.3. Call Expressions
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../04/Data_Types.html">
     3.4. Data Types
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../04/1/Numbers.html">
       3.4.1. Numbers
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../04/2/Strings.html">
       3.4.2. Strings
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../04/3/Comparison.html">
       3.4.3. Comparisons
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../05/Sequences.html">
     3.5. Sequences
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../05/1/Arrays.html">
       3.5.1. Arrays
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../05/2/Ranges.html">
       3.5.2. Ranges
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../05/3/More_on_Arrays.html">
       3.5.3. More on Arrays
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../essentials/essentials.html">
   4. Python Essentials
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../essentials/basics.html">
     4.1. Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../essentials/collections.html">
     4.2. Collections
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../essentials/control_flow.html">
     4.3. Flow control
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../essentials/functions.html">
     4.4. Functions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../scientific/intro.html">
   5. Scientific Computing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../scientific/numpy1.html">
     5.1. Numpy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../scientific/plotting1.html">
     5.2. Plotting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../scientific/linear_algebra1.html">
     5.3. Linear algebra
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../scientific/randomness1.html">
     5.4. Randomness
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../pandas/workingwithdata.html">
   6. Working with Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/intro.html">
     6.1. Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/basics.html">
     6.2. Pandas Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/the_index.html">
     6.3. Indexing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/data_clean.html">
     6.4. Cleaning data (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/reshape.html">
     6.5. Reshape (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/merge.html">
     6.6. Merge (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/groupby.html">
     6.7. Group-by (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/timeseries.html">
     6.8. Time-Series
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/matplotlib.html">
     6.9. Plotting (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/storage_formats.html">
     6.10. Data Storage (opt)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Notebook3.html">
   7. Asset Returns
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Notebook3_TheChoiceofFrequency.html">
     7.1. The Choice of Frequency and Annualization of Returns
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Notebook4_PortfolioMath.html">
   8. Portfolio Math
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Notebook4_CapitalAllocationLine.html">
   9. Capital Allocation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="UsingAPI.html">
     9.1. Using APIs
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Notebook4_MeanVariance.html">
   10. Mean Variance Efficient Portfolios
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Notebook4_CaseStudy.html">
     10.1. Case Study in International Diversification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="LeverageandShorting.html">
     10.2. Leverage and Shorting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Notebook5_Portfoliooptimizationwithconstraints.html">
     10.3. Portfolio Optimization with constraints
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Notebook5_EstimationUncertainty.html">
   11. Estimation Uncertainty and It's Implications for investing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Notebook6A_TradingStrategies.html">
   12. Trading Strategies
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Timing.html">
   13. Timing Strategies
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Notebook6A_Volatilitytiming.html">
     13.1. Volatility Timing
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Notebook6B_crosssectionalequitystrategies.html">
   14. Cross-Sectional Equity Strategies
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Notebook6B_Valueinvesting.html">
     14.1. Value
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Notebook6B_Momentum.html">
     14.2. Momentum
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Evaluation.html">
   15. Evaluating a Trading Strategy
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Econometrics.html">
     15.1. The Econometrics of Strategy Evalaution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="outofsample.html">
     15.2. Out of Sample Analysis
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Topics.html">
   16. Topics in Quantitative Investing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Equilbrium.html">
     16.1. Intepreting Factor models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Implementation.html">
     16.2. Strategy Implementation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../additional/additional.html">
   17. Additional Statistics Material
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../10/Sampling_and_Empirical_Distributions.html">
     17.1.1. Sampling and Empirical Distributions
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
    <label for="toctree-checkbox-18">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../10/1/Empirical_Distributions.html">
       17.1.1.1. Empirical Distributions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../10/2/Sampling_from_a_Population.html">
       17.1.1.2. Sampling from a Population
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../10/3/Empirical_Distribution_of_a_Statistic.html">
       17.1.1.3. Empirical Distibution of a Statistic
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../11/Testing_Hypotheses.html">
     17.1.2. Testing Hypotheses
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
    <label for="toctree-checkbox-19">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../11/1/Assessing_Models.html">
       17.1.2.1. Assessing Models
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../11/2/Multiple_Categories.html">
       17.1.2.2. Multiple Categories
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../11/3/Decisions_and_Uncertainty.html">
       17.1.2.3. Decisions and Uncertainty
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../11/4/Error_Probabilities.html">
       17.1.2.4. Error Probabilities
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../13/Estimation.html">
     17.1.3. Estimation
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
    <label for="toctree-checkbox-20">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../13/1/Percentiles.html">
       17.1.3.1. Percentiles
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../13/2/Bootstrap.html">
       17.1.3.2. The Bootstrap
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../13/3/Confidence_Intervals.html">
       17.1.3.3. Confidence Intervals
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../13/4/Using_Confidence_Intervals.html">
       17.1.3.4. Using Confidence Intervals
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../14/Why_the_Mean_Matters.html">
     17.1.4. Why the Mean Matters
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
    <label for="toctree-checkbox-21">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../14/1/Properties_of_the_Mean.html">
       17.1.4.1. Properties of the Mean
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../14/2/Variability.html">
       17.1.4.2. Variability
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../14/3/SD_and_the_Normal_Curve.html">
       17.1.4.3. The SD and the Normal Curve
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../14/4/Central_Limit_Theorem.html">
       17.1.4.4. The Central Limit Theorem
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../14/5/Variability_of_the_Sample_Mean.html">
       17.1.4.5. The Variability of the Sample Mean
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../14/6/Choosing_a_Sample_Size.html">
       17.1.4.6. Choosing a Sample Size
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../15/Prediction.html">
     17.1.5. Prediction
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/>
    <label for="toctree-checkbox-22">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../15/1/Correlation.html">
       17.1.5.1. Correlation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../15/2/Regression_Line.html">
       17.1.5.2. The Regression Line
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../15/3/Method_of_Least_Squares.html">
       17.1.5.3. The Method of Least Squares
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../15/4/Least_Squares_Regression.html">
       17.1.5.4. Least Squares Regression
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../15/5/Visual_Diagnostics.html">
       17.1.5.5. Visual Diagnostics
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../15/6/Numerical_Diagnostics.html">
       17.1.5.6. Numerical Diagnostics
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../16/Inference_for_Regression.html">
     17.1.6. Inference for Regression
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/>
    <label for="toctree-checkbox-23">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../16/1/Regression_Model.html">
       17.1.6.1. A Regression Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../16/2/Inference_for_the_True_Slope.html">
       17.1.6.2. Inference for the True Slope
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../16/3/Prediction_Intervals.html">
       17.1.6.3. Prediction Intervals
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/chapters/Finance/leftovers.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/amoreira2/Lectures"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/amoreira2/Lectures/issues/new?title=Issue%20on%20page%20%2Fchapters/Finance/leftovers.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/amoreira2/Lectures/main?urlpath=lab/tree/chapters/Finance/leftovers.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        <a class="jupyterhub-button" href="https://pims.syzygy.ca/jupyter/hub/user-redirect/git-pull?repo=https://github.com/amoreira2/Lectures&urlpath=lab/tree/Lectures/chapters/Finance/leftovers.ipynb&branch=main"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/amoreira2/Lectures/blob/main/chapters/Finance/leftovers.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Log returns and Simple returns
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-go-back-and-fourth-between-log-and-simple-returns">
     How to go back and fourth between log and simple returns?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lets-do-a-time-series-test-of-the-capm-using-these-10-book-to-market-sorted-portfolios">
     Lets do a time-series test of the CAPM using these 10 Book-to-market sorted portfolios
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lecture-12-4-ended-here">
   Lecture 12/4 ended here
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-value-minus-growth-strategy">
     The ‚ÄúValue‚Äù minus ‚Äúgrowth‚Äù strategy
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#interpretating-factor-models">
   Interpretating  Factor models
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-academic-view">
     The academic view
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-practicioner-view">
     The Practicioner view
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#investors">
     Investors
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#equilibrium-thinking-shoudl-be-used-to-to-guard-against-estimation-uncertainty-the-in-sample-vs-out-sample-problem">
       Equilibrium thinking shoudl be used to to guard against estimation uncertainty (the in-sample vs out-sample problem)
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#equilibrium-in-asset-markets">
     Equilibrium in asset markets
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-general-answer">
       The general answer
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-capm-again">
     The CAPM (again)
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multi-factor-models">
     Multi-factor models
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-series-test-for-multi-factor-models">
     Time-series test for multi-factor models
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#two-factor-model">
       Two-factor model
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#bonus-box-a-three-factor-model">
       Bonus Box:  A Three-factor model
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#additional-discussion">
   Additional discussion
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#portfolio-implications-of-the-equilibrium-view">
     Portfolio implications of the equilibrium view
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#quantitative-investing-is-going-from-names-to-characteristics">
     Quantitative investing is going from ‚Äúnames‚Äù  to characteristics
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-test-with-portfolios-rather-than-just-look-at-stocks">
     Why test with portfolios rather than just look at stocks?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#economic-vs-statistical-rejection">
     Economic vs statistical rejection
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="log-returns-and-simple-returns">
<h1>Log returns and Simple returns<a class="headerlink" href="#log-returns-and-simple-returns" title="Permalink to this headline">¬∂</a></h1>
<p>Insight: If innovations in log returns are iid then, log returns at long enough horizons must be normal (Central Limit Theorem)</p>
<div class="math notranslate nohighlight">
\[\begin{split}1+ùëÖ_{1‚Üíùëá}=((1+ùëÖ_1 )(1+ùëÖ_2 )‚Ä¶(1+ùëÖ_ùëá))‚Å°\\
ln‚Å°(1+ùëÖ_{1‚Üíùëá} )=ln‚Å°((1+ùëÖ_1 )(1+ùëÖ_2 )‚Ä¶(1+ùëÖ_ùëá ))\\
ln‚Å°(1+ùëÖ_{1‚Üíùëá} )=ln‚Å°(1+ùëÖ_1 )+ln‚Å°(1+ùëÖ_2 )+‚Ä¶+ln‚Å°(1+ùëÖ_ùëá )\\
                    ùëü_{1‚Üíùëá}=ùëü_1+ùëü_2+‚Ä¶+ùëü_ùëá \end{split}\]</div>
<ul class="simple">
<li><p>Thus, if T is large, <span class="math notranslate nohighlight">\(ùëü_{1‚Üíùëá}\)</span> will be approximately normally distributed. (central limit theorem)</p></li>
<li><p><span class="math notranslate nohighlight">\(ùëü_ùë°=ln‚Å°(1+ùëÖ_ùë° )\)</span> is the rate of return assuming continuous compounding for the period t.</p></li>
<li><p>This turns out to hold up well if you look at horizons longer than a month, but does not work at all at daily frequency (much fatter left tail than the normal distribution predicts)</p></li>
<li><p>Log returns are also very convenient when thinking about long-term investing</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">Data</span><span class="o">.</span><span class="n">MKT</span><span class="p">)</span><span class="o">.</span><span class="n">skew</span><span class="p">(),</span><span class="n">X</span><span class="o">.</span><span class="n">skew</span><span class="p">()])</span>

<span class="nb">print</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">Data</span><span class="o">.</span><span class="n">MKT</span><span class="p">)</span><span class="o">.</span><span class="n">kurtosis</span><span class="p">(),</span><span class="n">X</span><span class="o">.</span><span class="n">kurtosis</span><span class="p">()])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[-0.7707864524331097, -0.10212480191113225]
[2.859221702344219, -0.17043746558020745]
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-to-go-back-and-fourth-between-log-and-simple-returns">
<h2>How to go back and fourth between log and simple returns?<a class="headerlink" href="#how-to-go-back-and-fourth-between-log-and-simple-returns" title="Permalink to this headline">¬∂</a></h2>
<p>Let R be a simple net return per period, i.e., if you invest 10 , you get 10(1+R) in the end of the period</p>
<p>R is a number like 5% (0.05)</p>
<p>We say 1+R, a number like 1.05 is a gross return.</p>
<p>Why gross? Because it includes 1, your initial investment.</p>
<ul class="simple">
<li><p>To get log returns: <span class="math notranslate nohighlight">\(r=log(1+R)\)</span></p></li>
<li><p>To get back simple returns: <span class="math notranslate nohighlight">\(R=exp(r)-1\)</span></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">Data</span><span class="o">.</span><span class="n">MKT</span><span class="p">)</span>
<span class="n">R</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
<span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">R</span><span class="p">,</span><span class="n">Data</span><span class="o">.</span><span class="n">MKT</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>MKT</th>
      <th>MKT</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1963-02-28</th>
      <td>-0.0215</td>
      <td>-0.0215</td>
    </tr>
    <tr>
      <th>1963-03-31</th>
      <td>0.0331</td>
      <td>0.0331</td>
    </tr>
    <tr>
      <th>1963-04-30</th>
      <td>0.0476</td>
      <td>0.0476</td>
    </tr>
    <tr>
      <th>1963-05-31</th>
      <td>0.0200</td>
      <td>0.0200</td>
    </tr>
    <tr>
      <th>1963-06-30</th>
      <td>-0.0177</td>
      <td>-0.0177</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">threshold</span><span class="o">=</span><span class="mi">3</span>
<span class="c1"># now real data in log returns</span>

<span class="n">A</span><span class="o">=</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">Data</span><span class="o">.</span><span class="n">MKT</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">Data</span><span class="o">.</span><span class="n">MKT</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span><span class="o">&lt;-</span><span class="n">threshold</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">Data</span><span class="o">.</span><span class="n">MKT</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
<span class="n">B</span><span class="o">=</span><span class="p">((</span><span class="n">X</span><span class="o">-</span><span class="n">X</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span><span class="o">&lt;-</span><span class="n">threshold</span><span class="o">*</span><span class="n">X</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
<span class="p">[</span><span class="n">A</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span><span class="n">B</span><span class="o">.</span><span class="n">sum</span><span class="p">()]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[4, 0]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import BEME (Book-equity over Market equity) sorted portfolios</span>
<span class="c1"># BEME 1 has low book to market- &gt; Known as growth stocks (example: Tesla, Amazon, Facebook)</span>

<span class="c1"># BEME 10 has high book to market -&gt; Known as value stocks ( old firms: utilities, banks, insurance companies)</span>

<span class="c1"># but it changes....</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://www.dropbox.com/s/gds8ho9rt1imw03/Valueportfolios.csv?dl=1&quot;</span>
<span class="n">parser</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">date</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%Y%m&#39;</span><span class="p">)</span>
<span class="n">Data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
                         <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">date_parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span><span class="n">skiprows</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1092</span><span class="p">,</span><span class="n">na_values</span><span class="o">=-</span><span class="mf">99.99</span><span class="p">)</span>


<span class="c1"># need to adjust the date to the end-of-month convention </span>
<span class="c1"># (Even though both returns for a given month are end-of-month to end-of-month,</span>
<span class="c1"># when we import the value portfolios, Python used the first day of the month as date. </span>
<span class="c1"># To fix that, we will convert it to end-of-month</span>
<span class="c1"># It is important to do that before the merge. Why? )</span>
<span class="n">Data</span><span class="o">.</span><span class="n">index</span><span class="o">=</span><span class="n">Data</span><span class="o">.</span><span class="n">index</span><span class="o">+</span><span class="n">pd</span><span class="o">.</span><span class="n">tseries</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">MonthEnd</span><span class="p">()</span>
<span class="p">(</span><span class="n">Data</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="c1"># ready to merge with Market and RF</span>

<span class="n">Data</span><span class="o">=</span><span class="n">Data</span><span class="o">/</span><span class="mi">100</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># merge with factors</span>
<span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">Data</span><span class="p">,</span><span class="n">Factors</span><span class="p">,</span><span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BEME1</th>
      <th>BEME2</th>
      <th>BEME3</th>
      <th>BEME4</th>
      <th>BEME5</th>
      <th>BEME6</th>
      <th>BEME7</th>
      <th>BEME8</th>
      <th>BEME9</th>
      <th>BEME10</th>
      <th>RF</th>
      <th>MKT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1926-07-31</th>
      <td>0.0463</td>
      <td>0.0124</td>
      <td>0.1140</td>
      <td>0.0168</td>
      <td>0.0150</td>
      <td>0.0209</td>
      <td>0.0273</td>
      <td>0.0158</td>
      <td>0.0063</td>
      <td>0.0052</td>
      <td>0.0022</td>
      <td>0.0318</td>
    </tr>
    <tr>
      <th>1926-08-31</th>
      <td>0.0015</td>
      <td>0.0218</td>
      <td>0.0640</td>
      <td>0.0238</td>
      <td>0.0158</td>
      <td>0.0263</td>
      <td>0.0446</td>
      <td>0.0494</td>
      <td>0.0831</td>
      <td>0.0392</td>
      <td>0.0025</td>
      <td>0.0289</td>
    </tr>
    <tr>
      <th>1926-09-30</th>
      <td>-0.0011</td>
      <td>-0.0230</td>
      <td>0.0632</td>
      <td>0.0073</td>
      <td>-0.0089</td>
      <td>0.0038</td>
      <td>-0.0028</td>
      <td>0.0017</td>
      <td>-0.0216</td>
      <td>0.0044</td>
      <td>0.0023</td>
      <td>0.0059</td>
    </tr>
    <tr>
      <th>1926-10-31</th>
      <td>-0.0378</td>
      <td>-0.0163</td>
      <td>-0.0501</td>
      <td>-0.0141</td>
      <td>-0.0231</td>
      <td>-0.0210</td>
      <td>-0.0465</td>
      <td>-0.0280</td>
      <td>-0.0546</td>
      <td>-0.0117</td>
      <td>0.0032</td>
      <td>-0.0292</td>
    </tr>
    <tr>
      <th>1926-11-30</th>
      <td>0.0603</td>
      <td>0.0149</td>
      <td>0.0111</td>
      <td>0.0363</td>
      <td>0.0197</td>
      <td>0.0180</td>
      <td>0.0400</td>
      <td>0.0385</td>
      <td>0.0277</td>
      <td>0.0176</td>
      <td>0.0031</td>
      <td>0.0284</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># transfor in excess returns</span>
<span class="n">Re</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">Re</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span><span class="o">=</span><span class="n">Re</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">Re</span><span class="p">[</span><span class="s1">&#39;RF&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Re</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">11</span><span class="p">]</span><span class="o">=</span><span class="n">Re</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">11</span><span class="p">]</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">Re</span><span class="p">[</span><span class="s1">&#39;RF&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># take the risk-free rate column out of the database</span>
<span class="k">del</span> <span class="n">Re</span><span class="p">[</span><span class="s1">&#39;RF&#39;</span><span class="p">]</span>
<span class="n">Re</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BEME1</th>
      <th>BEME2</th>
      <th>BEME3</th>
      <th>BEME4</th>
      <th>BEME5</th>
      <th>BEME6</th>
      <th>BEME7</th>
      <th>BEME8</th>
      <th>BEME9</th>
      <th>BEME10</th>
      <th>MKT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1926-07-31</th>
      <td>0.0441</td>
      <td>0.0102</td>
      <td>0.1118</td>
      <td>0.0146</td>
      <td>0.0128</td>
      <td>0.0187</td>
      <td>0.0251</td>
      <td>0.0136</td>
      <td>0.0041</td>
      <td>0.0030</td>
      <td>0.0296</td>
    </tr>
    <tr>
      <th>1926-08-31</th>
      <td>-0.0010</td>
      <td>0.0193</td>
      <td>0.0615</td>
      <td>0.0213</td>
      <td>0.0133</td>
      <td>0.0238</td>
      <td>0.0421</td>
      <td>0.0469</td>
      <td>0.0806</td>
      <td>0.0367</td>
      <td>0.0264</td>
    </tr>
    <tr>
      <th>1926-09-30</th>
      <td>-0.0034</td>
      <td>-0.0253</td>
      <td>0.0609</td>
      <td>0.0050</td>
      <td>-0.0112</td>
      <td>0.0015</td>
      <td>-0.0051</td>
      <td>-0.0006</td>
      <td>-0.0239</td>
      <td>0.0021</td>
      <td>0.0036</td>
    </tr>
    <tr>
      <th>1926-10-31</th>
      <td>-0.0410</td>
      <td>-0.0195</td>
      <td>-0.0533</td>
      <td>-0.0173</td>
      <td>-0.0263</td>
      <td>-0.0242</td>
      <td>-0.0497</td>
      <td>-0.0312</td>
      <td>-0.0578</td>
      <td>-0.0149</td>
      <td>-0.0324</td>
    </tr>
    <tr>
      <th>1926-11-30</th>
      <td>0.0572</td>
      <td>0.0118</td>
      <td>0.0080</td>
      <td>0.0332</td>
      <td>0.0166</td>
      <td>0.0149</td>
      <td>0.0369</td>
      <td>0.0354</td>
      <td>0.0246</td>
      <td>0.0145</td>
      <td>0.0253</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Note below how average returns increase in Book to market</p>
<ul class="simple">
<li><p>Value (BEME10) stocks have higher average returns than growth stocks (BEME1)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">Re</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:&gt;
</pre></div>
</div>
<img alt="../../_images/leftovers_17_1.png" src="../../_images/leftovers_17_1.png" />
</div>
</div>
</div>
<div class="section" id="lets-do-a-time-series-test-of-the-capm-using-these-10-book-to-market-sorted-portfolios">
<h2>Lets do a time-series test of the CAPM using these 10 Book-to-market sorted portfolios<a class="headerlink" href="#lets-do-a-time-series-test-of-the-capm-using-these-10-book-to-market-sorted-portfolios" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li><p>What does this tell us about the market?</p></li>
<li><p>What does this tell us about BEME10?</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We have a monthly alpha of 0.0033</span>
<span class="nb">print</span><span class="p">(</span><span class="mf">0.0033</span><span class="o">*</span><span class="mi">12</span><span class="p">)</span>
<span class="c1"># yearly alpha is about 4%</span>
<span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">12</span>
<span class="c1"># yearly market premium is about 6%</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.039599999999999996
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>const    12.000000
MKT       0.063508
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">temp</span><span class="o">=</span><span class="n">Re</span><span class="p">[</span><span class="s1">&#39;1963&#39;</span><span class="p">:</span><span class="s1">&#39;2018&#39;</span><span class="p">]</span> 
<span class="c1"># On the right hand side, we have &#39;MKT&#39; portfolio, we will add an constant term to it</span>
<span class="n">x</span><span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="s1">&#39;MKT&#39;</span><span class="p">])</span>
<span class="c1"># the coefficient on the constant is the &quot;alpha&quot;</span>

<span class="c1"># On the left hand side, we have &#39;BEME10&#39; portfolio</span>
<span class="n">y</span><span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="s1">&#39;BEME10&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">temp</span><span class="p">[</span><span class="s1">&#39;BEME1&#39;</span><span class="p">]</span>
<span class="n">results</span><span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">results</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>            <td>y</td>        <th>  R-squared:         </th> <td>   0.005</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.003</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   3.159</td>
</tr>
<tr>
  <th>Date:</th>             <td>Mon, 26 Apr 2021</td> <th>  Prob (F-statistic):</th>  <td>0.0760</td> 
</tr>
<tr>
  <th>Time:</th>                 <td>09:34:55</td>     <th>  Log-Likelihood:    </th> <td>  1076.3</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>   654</td>      <th>  AIC:               </th> <td>  -2149.</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>   652</td>      <th>  BIC:               </th> <td>  -2140.</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     1</td>      <th>                     </th>     <td> </td>   
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>   
</tr>
</table>
<table class="simpletable">
<tr>
    <td></td>       <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>const</th> <td>    0.0045</td> <td>    0.002</td> <td>    2.445</td> <td> 0.015</td> <td>    0.001</td> <td>    0.008</td>
</tr>
<tr>
  <th>MKT</th>   <td>    0.0740</td> <td>    0.042</td> <td>    1.777</td> <td> 0.076</td> <td>   -0.008</td> <td>    0.156</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>52.948</td> <th>  Durbin-Watson:     </th> <td>   1.645</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td> <th>  Jarque-Bera (JB):  </th> <td> 127.480</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 0.438</td> <th>  Prob(JB):          </th> <td>2.08e-28</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 4.978</td> <th>  Cond. No.          </th> <td>    22.8</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div></div>
</div>
</div>
</div>
<div class="section" id="lecture-12-4-ended-here">
<h1>Lecture 12/4 ended here<a class="headerlink" href="#lecture-12-4-ended-here" title="Permalink to this headline">¬∂</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">E</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">Re</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
<span class="n">E</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>BEME1</th>
      <td>0.005859</td>
    </tr>
    <tr>
      <th>BEME2</th>
      <td>0.006873</td>
    </tr>
    <tr>
      <th>BEME3</th>
      <td>0.006907</td>
    </tr>
    <tr>
      <th>BEME4</th>
      <td>0.006643</td>
    </tr>
    <tr>
      <th>BEME5</th>
      <td>0.007234</td>
    </tr>
    <tr>
      <th>BEME6</th>
      <td>0.007923</td>
    </tr>
    <tr>
      <th>BEME7</th>
      <td>0.007247</td>
    </tr>
    <tr>
      <th>BEME8</th>
      <td>0.009139</td>
    </tr>
    <tr>
      <th>BEME9</th>
      <td>0.010582</td>
    </tr>
    <tr>
      <th>BEME10</th>
      <td>0.010701</td>
    </tr>
    <tr>
      <th>MKT</th>
      <td>0.006567</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># now lets build a function that run the regression for all the portfolios and stores the info in a dataframe</span>
<span class="k">def</span> <span class="nf">TSregression</span><span class="p">(</span><span class="n">temp</span><span class="p">):</span>
    <span class="n">E</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
    <span class="n">E</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;AvgReturns&#39;</span><span class="p">]</span>
    <span class="n">x</span><span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="s1">&#39;MKT&#39;</span><span class="p">])</span>
    <span class="n">E</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">temp</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
    <span class="n">E</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">E</span><span class="p">[</span><span class="s1">&#39;AvgReturns&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">0</span>
    <span class="n">E</span><span class="p">[</span><span class="s1">&#39;std_alpha&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">E</span><span class="p">[</span><span class="s1">&#39;AvgReturns&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">0</span>
    <span class="n">E</span><span class="p">[</span><span class="s1">&#39;t-alpha&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">E</span><span class="p">[</span><span class="s1">&#39;AvgReturns&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">0</span>
    <span class="n">E</span><span class="p">[</span><span class="s1">&#39;beta&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">E</span><span class="p">[</span><span class="s1">&#39;AvgReturns&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">0</span>
    <span class="n">E</span><span class="p">[</span><span class="s1">&#39;std_beta&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">E</span><span class="p">[</span><span class="s1">&#39;AvgReturns&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">0</span>
    <span class="n">E</span><span class="p">[</span><span class="s1">&#39;std_e&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">E</span><span class="p">[</span><span class="s1">&#39;AvgReturns&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">0</span>
    
    <span class="k">for</span> <span class="n">portfolios</span> <span class="ow">in</span> <span class="n">E</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]:</span>
        <span class="n">y</span><span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">portfolios</span><span class="p">]</span>
        <span class="n">results</span><span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
        <span class="n">E</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">portfolios</span><span class="p">,</span><span class="s1">&#39;alpha&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">E</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">portfolios</span><span class="p">,</span><span class="s1">&#39;beta&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">E</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">portfolios</span><span class="p">,</span><span class="s1">&#39;std_e&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">resid</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
        <span class="n">E</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">portfolios</span><span class="p">,</span><span class="s1">&#39;std_alpha&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">HC0_se</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">E</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">portfolios</span><span class="p">,</span><span class="s1">&#39;std_beta&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">HC0_se</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">E</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">portfolios</span><span class="p">,</span><span class="s1">&#39;pvalues&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    
    <span class="n">E</span><span class="p">[</span><span class="s1">&#39;t-alpha&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">E</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">E</span><span class="p">[</span><span class="s1">&#39;std_alpha&#39;</span><span class="p">]</span>
    <span class="n">E</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s1">&#39;MKT&#39;</span><span class="p">,</span><span class="s1">&#39;beta&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span> 
    <span class="k">return</span> <span class="n">E</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lets select a sample to do our analysis</span>

<span class="c1"># this is a sample that I know that the value puzzle is strong</span>
<span class="n">TSresults</span><span class="o">=</span><span class="n">TSregression</span><span class="p">(</span><span class="n">Re</span><span class="p">[</span><span class="s1">&#39;1963&#39;</span><span class="p">:</span><span class="s1">&#39;2002&#39;</span><span class="p">])</span>
<span class="n">TSresults</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AvgReturns</th>
      <th>std</th>
      <th>alpha</th>
      <th>std_alpha</th>
      <th>t-alpha</th>
      <th>beta</th>
      <th>std_beta</th>
      <th>std_e</th>
      <th>pvalues</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>BEME1</th>
      <td>0.003225</td>
      <td>0.053380</td>
      <td>-0.001581</td>
      <td>0.000890</td>
      <td>-1.776274</td>
      <td>1.097840</td>
      <td>0.024294</td>
      <td>0.019468</td>
      <td>0.077605</td>
    </tr>
    <tr>
      <th>BEME2</th>
      <td>0.004858</td>
      <td>0.048438</td>
      <td>0.000361</td>
      <td>0.000623</td>
      <td>0.578281</td>
      <td>1.027575</td>
      <td>0.017492</td>
      <td>0.013486</td>
      <td>0.560573</td>
    </tr>
    <tr>
      <th>BEME3</th>
      <td>0.004672</td>
      <td>0.047969</td>
      <td>0.000261</td>
      <td>0.000680</td>
      <td>0.383216</td>
      <td>1.007874</td>
      <td>0.018809</td>
      <td>0.014794</td>
      <td>0.701190</td>
    </tr>
    <tr>
      <th>BEME4</th>
      <td>0.004645</td>
      <td>0.047198</td>
      <td>0.000439</td>
      <td>0.000845</td>
      <td>0.519184</td>
      <td>0.961090</td>
      <td>0.027117</td>
      <td>0.018285</td>
      <td>0.601501</td>
    </tr>
    <tr>
      <th>BEME5</th>
      <td>0.004529</td>
      <td>0.044331</td>
      <td>0.000688</td>
      <td>0.000900</td>
      <td>0.764968</td>
      <td>0.877361</td>
      <td>0.025995</td>
      <td>0.019683</td>
      <td>0.446583</td>
    </tr>
    <tr>
      <th>BEME6</th>
      <td>0.006041</td>
      <td>0.043503</td>
      <td>0.002347</td>
      <td>0.000968</td>
      <td>2.424715</td>
      <td>0.843970</td>
      <td>0.029767</td>
      <td>0.020797</td>
      <td>0.014305</td>
    </tr>
    <tr>
      <th>BEME7</th>
      <td>0.006531</td>
      <td>0.044530</td>
      <td>0.002767</td>
      <td>0.000992</td>
      <td>2.790137</td>
      <td>0.859885</td>
      <td>0.033048</td>
      <td>0.021618</td>
      <td>0.005514</td>
    </tr>
    <tr>
      <th>BEME8</th>
      <td>0.007318</td>
      <td>0.044255</td>
      <td>0.003582</td>
      <td>0.000981</td>
      <td>3.650885</td>
      <td>0.853580</td>
      <td>0.030030</td>
      <td>0.021566</td>
      <td>0.000328</td>
    </tr>
    <tr>
      <th>BEME9</th>
      <td>0.007988</td>
      <td>0.047929</td>
      <td>0.003975</td>
      <td>0.001091</td>
      <td>3.644067</td>
      <td>0.916861</td>
      <td>0.035320</td>
      <td>0.023961</td>
      <td>0.000334</td>
    </tr>
    <tr>
      <th>BEME10</th>
      <td>0.009536</td>
      <td>0.056103</td>
      <td>0.005083</td>
      <td>0.001461</td>
      <td>3.479666</td>
      <td>1.017468</td>
      <td>0.047329</td>
      <td>0.032025</td>
      <td>0.000594</td>
    </tr>
    <tr>
      <th>MKT</th>
      <td>0.004377</td>
      <td>0.045274</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">TSresults</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;beta&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;AvgReturns&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/leftovers_26_0.png" src="../../_images/leftovers_26_0.png" />
</div>
</div>
<blockquote>
<div><p>How should this plot look like if the Market was tangency as predicted by the CAPM?</p>
</div></blockquote>
<blockquote>
<div><p>Is the market likely to be tangency?</p>
</div></blockquote>
<ul>
<li><p>The value strategy is interesting not because value stocks have higher expected returns</p></li>
<li><p>The Value strategy in interesting because these expected returns do not line up with market betas!</p></li>
<li><p>And therefore, an investor that only holds the market can benefit by tilting his portfolio towards value stocks</p></li>
<li><p>BOOK to MARKET sorted portfolios risk-return relation is not explained by the CAPM</p>
<ol class="simple">
<li><p>Value portfolios have very large alphas with respect to the market portfolio.</p></li>
</ol>
<ul class="simple">
<li><p>Portfolio 9 rejects the CAPM with a confidence of more than 99.99%</p></li>
</ul>
<ol class="simple">
<li><p>A long-short strategy is likely to blow the CAPM out of the water even more strongly</p></li>
</ol>
<ul class="simple">
<li><p>Value and growth portfolios have similar betas but very different returns!</p></li>
<li><p>One can use the growth portfolio to hedge market exposure cheaply since it has high beta but low returns!</p></li>
</ul>
</li>
</ul>
<div class="section" id="the-value-minus-growth-strategy">
<h2>The ‚ÄúValue‚Äù minus ‚Äúgrowth‚Äù strategy<a class="headerlink" href="#the-value-minus-growth-strategy" title="Permalink to this headline">¬∂</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># I will select a sample where the results are particularly strong</span>

<span class="c1"># you should then investignate tto see how well it did recently</span>

<span class="n">b</span><span class="o">=</span><span class="s1">&#39;1963&#39;</span>
<span class="n">e</span><span class="o">=</span><span class="s1">&#39;2002&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">Re</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">b</span><span class="p">:</span><span class="n">e</span><span class="p">,</span><span class="s1">&#39;MKT&#39;</span><span class="p">])</span>
<span class="n">y</span><span class="o">=</span> <span class="n">Re</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">b</span><span class="p">:</span><span class="n">e</span><span class="p">,</span><span class="s1">&#39;BEME10&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">Re</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">b</span><span class="p">:</span><span class="n">e</span><span class="p">,</span><span class="s1">&#39;BEME1&#39;</span><span class="p">]</span>
<span class="n">results</span><span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">results</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>            <td>y</td>        <th>  R-squared:         </th> <td>   0.006</td>
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.004</td>
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   3.066</td>
</tr>
<tr>
  <th>Date:</th>             <td>Mon, 26 Apr 2021</td> <th>  Prob (F-statistic):</th>  <td>0.0806</td> 
</tr>
<tr>
  <th>Time:</th>                 <td>09:34:55</td>     <th>  Log-Likelihood:    </th> <td>  803.34</td>
</tr>
<tr>
  <th>No. Observations:</th>      <td>   480</td>      <th>  AIC:               </th> <td>  -1603.</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>   478</td>      <th>  BIC:               </th> <td>  -1594.</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     1</td>      <th>                     </th>     <td> </td>   
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>   
</tr>
</table>
<table class="simpletable">
<tr>
    <td></td>       <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>const</th> <td>    0.0067</td> <td>    0.002</td> <td>    3.195</td> <td> 0.001</td> <td>    0.003</td> <td>    0.011</td>
</tr>
<tr>
  <th>MKT</th>   <td>   -0.0804</td> <td>    0.046</td> <td>   -1.751</td> <td> 0.081</td> <td>   -0.171</td> <td>    0.010</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>33.146</td> <th>  Durbin-Watson:     </th> <td>   1.666</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td> <th>  Jarque-Bera (JB):  </th> <td>  55.320</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 0.472</td> <th>  Prob(JB):          </th> <td>9.71e-13</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 4.370</td> <th>  Cond. No.          </th> <td>    22.1</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y</span><span class="o">=</span> <span class="n">Re</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">b</span><span class="p">:</span><span class="n">e</span><span class="p">]</span><span class="o">.</span><span class="n">BEME10</span><span class="o">-</span><span class="n">Re</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">b</span><span class="p">:</span><span class="n">e</span><span class="p">]</span><span class="o">.</span><span class="n">BEME1</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;average returns&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">([</span><span class="n">y</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">12</span><span class="p">,</span><span class="n">Re</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">b</span><span class="p">:</span><span class="n">e</span><span class="p">]</span><span class="o">.</span><span class="n">MKT</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">12</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sharpe&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">([(</span><span class="n">y</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">/</span><span class="n">y</span><span class="o">.</span><span class="n">std</span><span class="p">())</span><span class="o">*</span><span class="mi">12</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span><span class="n">Re</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">b</span><span class="p">:</span><span class="n">e</span><span class="p">]</span><span class="o">.</span><span class="n">MKT</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">/</span><span class="n">Re</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">b</span><span class="p">:</span><span class="n">e</span><span class="p">]</span><span class="o">.</span><span class="n">MKT</span><span class="o">.</span><span class="n">std</span><span class="p">()</span><span class="o">*</span><span class="mi">12</span><span class="o">**</span><span class="mf">0.5</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;correlation&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">corrcoef</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">Re</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">b</span><span class="p">:</span><span class="n">e</span><span class="p">]</span><span class="o">.</span><span class="n">MKT</span><span class="p">)[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>average returns
[0.07574000000000003, 0.052525]
Sharpe
[0.47970405899166996, 0.33490847758654535]
correlation
-0.07983497016932051
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="interpretating-factor-models">
<h1>Interpretating  Factor models<a class="headerlink" href="#interpretating-factor-models" title="Permalink to this headline">¬∂</a></h1>
<div class="section" id="the-academic-view">
<h2>The academic view<a class="headerlink" href="#the-academic-view" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li><p>Factor models are models that describe how risk is priced in the economy</p></li>
<li><p>When you test a model, i.e., run a time-series regression you are testing if that model describes the risk-return trade-off in the economy</p></li>
<li><p>This a simultaneous test of (1) the proposed model and (2) whether markets are efficient</p></li>
<li><p>What does market efficiency means?</p></li>
<li><p>When you find an alpha that is statistically different from zero, you either</p>
<ol class="simple">
<li><p>reject the model</p></li>
<li><p>reject that markets are efficient</p></li>
<li><p>Or both</p></li>
</ol>
</li>
<li><p><strong>What you do with your portfolio really depends on what you believe</strong></p></li>
<li><p>If (2)‚Äìmarkets are inneficient‚Äì then it is pretty clear what you should do. You should load on this ‚Äúanomaly‚Äù because you believe that model describe how risk should be priced. So this alpha is mispricing. It is NOT a 100 dollar bill on the floor, becasue harvesting alpha is risky, but the higher the Appraisal ratio the more it * <em>looks</em> * like a 100 dollars bill. (An Arbitrage opportunity is the limit where this Appraisal ratio grows to infinity)</p>
<ul>
<li><p>In this (2) case you simply take into account the volatility and the comovement of the hedging portfolio with your portfolio</p></li>
</ul>
</li>
<li><p>If (1) and you reject the model. Now it is not so clear what you should do. Because you do have a view on what the proper model of risk and return is. So you don‚Äôt know if this alpha is proper compensation for risks that you dot know. You might investigate and add this hedged portfolio as a factor if you think it captures some dimensions of risks that are important and not captured by your original model</p>
<ul>
<li><p>For example there is tons of wealth that is not traded in the stock market: housing, private business,your human capital, firms that have not being born yet</p></li>
<li><p>It can be capturing risks associated with the banking sector like financial crisis, which might not be fully reflected in the stock market</p></li>
<li><p>The factor can be caputring exposure to such risks and therefore it is a much more subtle question of whether you think your appetite for this risk is higher that the price of it (the appraisal ratio)</p></li>
</ul>
</li>
<li><p><strong>So after an rejection you need to do a post-morten to understand if you are in (1) or (2) and if you are in (1) what exactly is the kind of risk you are talkign about</strong></p></li>
</ul>
</div>
<div class="section" id="the-practicioner-view">
<h2>The Practicioner view<a class="headerlink" href="#the-practicioner-view" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li><p>Factor models are used to describe invesestment strategies that are well known</p></li>
<li><p>Much less thought (incorrectly, imo) is given why these strategies work</p></li>
<li><p>For example: you add a value factor to your factor model (so a multi-factor model with  MKT and Value) not because you are taking a stand on the correct model, but simply to show that your strategy can add value even to someone that already has exposure to the market and the value factor. If your strategy has alpha, then you can claim that such investor can boost his Sharpe ratio by investing at least a bit in your strategy. The CAPM alpha by itself only answers this question for someone that has only an allocation to the market.</p></li>
<li><p>So factors are used as a way to ‚Äúsummarize‚Äù some general risk-return feaures of the stock market (or any asset market), and by using these set of factors as ‚Äúbenchmarks‚Äù you can cleanly show your value added.</p></li>
<li><p>The good practioner must have an understanding of where this alpha come from</p>
<ul>
<li><p>What are the mistakes that people are making?</p></li>
<li><p>Why this persists?</p></li>
<li><p>How would I be able to tell if this trade got ‚Äúcrowded‚Äù and will disappear going forward?</p></li>
<li><p>Having a theory that is plausible and make sense is another way to guard agaisnt estiamtion uncertainty and data mining bias that we are always exposed to</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="investors">
<h2>Investors<a class="headerlink" href="#investors" title="Permalink to this headline">¬∂</a></h2>
<p>But of course an investor must in the end take a stand on (1) vs (2). If a practiciner comes pitching a large alpha, then must be convinced that this is not fair compensation for some risk that he/she is unaware</p>
<div class="section" id="equilibrium-thinking-shoudl-be-used-to-to-guard-against-estimation-uncertainty-the-in-sample-vs-out-sample-problem">
<h3>Equilibrium thinking shoudl be used to to guard against estimation uncertainty (the in-sample vs out-sample problem)<a class="headerlink" href="#equilibrium-thinking-shoudl-be-used-to-to-guard-against-estimation-uncertainty-the-in-sample-vs-out-sample-problem" title="Permalink to this headline">¬∂</a></h3>
<ul class="simple">
<li><p>Not everyone can invest in the higher expected return assets</p></li>
<li><p>If we were all to invest in the higher expected return assets, prices would go up and expected returns would go down</p></li>
<li><p>Imposing equilibrium‚Äì that is:</p>
<ul>
<li><p>Assume all investors in the world are choosing optimal portfolios,</p></li>
<li><p>Then solve for the expected returns that make all the assets in the world be held</p></li>
<li><p>This is imposing equilibrium: since all assets must be held, and investors must want to hold them</p></li>
<li><p>Then expected returns have to adjust so everyone is happy and all assets are held</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="equilibrium-in-asset-markets">
<h2>Equilibrium in asset markets<a class="headerlink" href="#equilibrium-in-asset-markets" title="Permalink to this headline">¬∂</a></h2>
<ul>
<li><p>Fundamental Question:</p>
<blockquote>
<div><p>If everybody wants higher returns, why some assets earn higher average returns than others? Or why the tangency portfolio has larger positions in some assets than other assets?</p>
</div></blockquote>
</li>
<li><p>Finance theory: because these assets have low returns in bad times</p>
<blockquote>
<div><p>What are bad times?</p>
</div></blockquote>
<blockquote>
<div><p>How much more extra expected return to experience low returns during bad times?</p>
</div></blockquote>
</li>
</ul>
<div class="section" id="the-general-answer">
<h3>The general answer<a class="headerlink" href="#the-general-answer" title="Permalink to this headline">¬∂</a></h3>
<ul class="simple">
<li><p>Investors‚Äô preferences, fears , and background risk exposures will aggregate to some notion of bad times</p></li>
<li><p>Assets that pay poorly during these periods will earn higher returns per unit of volatility, i.e. will have high Sharpe ratios and be in the tangency portfolio with a large weight</p></li>
<li><p>Assets that pay well during bad times, good hedges, will earn lower returns, possibly negative, and will be in the tangency portfolio with a negative weight</p></li>
<li><p>CAPM is a particular case of this general framework where the market return summarizes how bad the times are</p></li>
</ul>
</div>
</div>
<div class="section" id="the-capm-again">
<h2>The CAPM (again)<a class="headerlink" href="#the-capm-again" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li><p>The Wealth portfolio is the tangency portfolio</p></li>
<li><p>The return on the wealth portfolio summarizes how Bad the times are</p></li>
<li><p>Assets that co-vary more with the market must earn higher returns</p></li>
<li><p>They pay poorly exactly when things are worse</p></li>
<li><p>What is the wealth portfolio? It is the portfolio that holds all assets in proportion to their value</p></li>
<li><p>We often use the equity market as a proxy for this, but that is not the CAPM</p></li>
<li><p>In a way that CAPM is untestable because it is impossible to construct the true wealth portfolio</p></li>
</ul>
<div class="math notranslate nohighlight">
\[E[R_t^i-R_t^f]=\beta_{i,mkt}E[R^{mkt}_t-R^f_t]\]</div>
</div>
<div class="section" id="multi-factor-models">
<h2>Multi-factor models<a class="headerlink" href="#multi-factor-models" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li><p>APT: Arbitrage Price Theory</p></li>
<li><p>ICAPM: Intertemporal Capital Asset Pricing Model</p></li>
<li><p>These models make less restrictive assumptions and predict that we will need additional factors beyond the market to ‚Äúspan‚Äù the tangency portfolio</p></li>
<li><p>What does ‚Äúspan‚Äù mean?</p></li>
</ul>
<div class="math notranslate nohighlight">
\[E[R_t^i-R_t^f]=\beta_{i,mkt}E[R^{mkt}_t-R^f_t]+\sum_{j=1}^J\beta_{i,j}E[Factor_j]\]</div>
<ul>
<li><p>It is basically the same as before, but now we run a multivariate regression</p>
<div class="math notranslate nohighlight">
\[R_{i,t}=\alpha_i+\beta_{mkt}R^{mkt}_t+\beta_1 Factor_1+\beta_2 Factor_2+\beta_3 Factor_3+....+\beta_n Factor_n+\epsilon_{i,t}\]</div>
</li>
<li><p>As long as the factors <strong>are also excess returns</strong>, the time-series alpha test is still valid and indentical as before.</p></li>
<li><p>You can do single asset tests and simply use the alpha t-stat to test the model</p></li>
<li><p>Everything that we discussed with the hedging/tracking portfolios apply here as well, but now</p></li>
</ul>
<div class="math notranslate nohighlight">
\[Hedged_{i,t}=R_{i,t}-(\beta_{mkt}R^{mkt}_t+\beta_1 Factor_1+\beta_2 Factor_2+\beta_3 Factor_3+....+\beta_n Factor_n)\]</div>
<p>where <span class="math notranslate nohighlight">\((\beta_{mkt}R^{mkt}_t+\beta_1 Factor_1+\beta_2 Factor_2+\beta_3 Factor_3+....+\beta_n Factor_n)\)</span> is the tracking portfolio</p>
<ul class="simple">
<li><p>You guys already learned Multi-factor theory (from Prof. Liu), but I will briefly discuss this next class as well.</p></li>
</ul>
</div>
<div class="section" id="time-series-test-for-multi-factor-models">
<h2>Time-series test for multi-factor models<a class="headerlink" href="#time-series-test-for-multi-factor-models" title="Permalink to this headline">¬∂</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://www.dropbox.com/s/9346pp2iu5prv8s/MonthlyFactors.csv?dl=1&quot;</span>
<span class="n">Factors</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
                         <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">na_values</span><span class="o">=-</span><span class="mi">99</span><span class="p">)</span>
<span class="n">Factors</span><span class="o">=</span><span class="n">Factors</span><span class="o">/</span><span class="mi">100</span>
<span class="c1"># keep factors needed</span>
<span class="n">Factors</span><span class="o">=</span><span class="n">Factors</span><span class="p">[[</span><span class="s1">&#39;HML&#39;</span><span class="p">,</span><span class="s1">&#39;SMB&#39;</span><span class="p">]]</span>
<span class="n">Factors</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>HML</th>
      <th>SMB</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1926-07-31</th>
      <td>-0.0287</td>
      <td>-0.0230</td>
    </tr>
    <tr>
      <th>1926-08-31</th>
      <td>0.0419</td>
      <td>-0.0140</td>
    </tr>
    <tr>
      <th>1926-09-30</th>
      <td>0.0001</td>
      <td>-0.0132</td>
    </tr>
    <tr>
      <th>1926-10-31</th>
      <td>0.0051</td>
      <td>0.0004</td>
    </tr>
    <tr>
      <th>1926-11-30</th>
      <td>-0.0035</td>
      <td>-0.0020</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">Re</span><span class="p">,</span><span class="n">Factors</span><span class="p">,</span><span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># no need to take out risk-free rate because these factors are already excess returns</span>
<span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>BEME1     0.005859
BEME2     0.006873
BEME3     0.006907
BEME4     0.006643
BEME5     0.007234
BEME6     0.007923
BEME7     0.007247
BEME8     0.009139
BEME9     0.010582
BEME10    0.010701
MKT       0.006567
HML       0.003881
SMB       0.002101
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="section" id="two-factor-model">
<h3>Two-factor model<a class="headerlink" href="#two-factor-model" title="Permalink to this headline">¬∂</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">HML</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">12</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.04657472527472528
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># initiate a data frame with row labels given by the 10 portfolios and the columns of the moments that we will estimate</span>
<span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;1963&#39;</span><span class="p">:</span><span class="s1">&#39;2002&#39;</span><span class="p">]</span>
<span class="n">names</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;MKT&#39;</span><span class="p">,</span><span class="s1">&#39;HML&#39;</span><span class="p">,</span><span class="s1">&#39;SMB&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span>
<span class="n">FF2</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([],</span><span class="n">index</span><span class="o">=</span><span class="n">names</span><span class="p">,</span>\
                 <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;avg&#39;</span><span class="p">,</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span><span class="s1">&#39;talpha&#39;</span><span class="p">,</span><span class="s1">&#39;betamkt&#39;</span><span class="p">,</span><span class="s1">&#39;tbetamkt&#39;</span><span class="p">,</span><span class="s1">&#39;betahml&#39;</span><span class="p">,</span><span class="s1">&#39;tbetahml&#39;</span><span class="p">])</span> 


<span class="c1"># create empty dataframe to store residual</span>
<span class="c1"># FF2Resid=df.drop([&#39;MKT&#39;,&#39;HML&#39;,&#39;SMB&#39;],axis=1).copy()</span>
<span class="c1"># FF2Resid.loc[:,:]=np.nan</span>

<span class="c1">#store avg return</span>
<span class="n">FF2</span><span class="p">[</span><span class="s1">&#39;avg&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;MKT&#39;</span><span class="p">,</span><span class="s1">&#39;HML&#39;</span><span class="p">,</span><span class="s1">&#39;SMB&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="k">for</span> <span class="n">portfolio</span> <span class="ow">in</span> <span class="n">FF2</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">portfolio</span><span class="p">]</span>
    
    <span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;MKT&#39;</span><span class="p">,</span><span class="s1">&#39;HML&#39;</span><span class="p">]]</span>
    <span class="n">x</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
    <span class="n">FF2</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">portfolio</span><span class="p">,[</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span><span class="s1">&#39;betamkt&#39;</span><span class="p">,</span><span class="s1">&#39;betahml&#39;</span><span class="p">]]</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">values</span>
    <span class="n">FF2</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">portfolio</span><span class="p">,[</span><span class="s1">&#39;talpha&#39;</span><span class="p">,</span><span class="s1">&#39;tbetamkt&#39;</span><span class="p">,</span><span class="s1">&#39;tbetahml&#39;</span><span class="p">]]</span><span class="o">=</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">params</span><span class="o">/</span><span class="n">results</span><span class="o">.</span><span class="n">HC0_se</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
<span class="c1">#     FF2Resid[portfolio]=results.resid</span>
    
<span class="n">FF2</span><span class="o">=</span><span class="n">FF2</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span>  
<span class="n">FF2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>avg</th>
      <th>alpha</th>
      <th>talpha</th>
      <th>betamkt</th>
      <th>tbetamkt</th>
      <th>betahml</th>
      <th>tbetahml</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>BEME1</th>
      <td>0.003225</td>
      <td>0.001393</td>
      <td>2.109877</td>
      <td>0.967143</td>
      <td>52.119242</td>
      <td>-0.507248</td>
      <td>-14.597779</td>
    </tr>
    <tr>
      <th>BEME2</th>
      <td>0.004858</td>
      <td>0.000885</td>
      <td>1.388941</td>
      <td>1.004520</td>
      <td>60.156797</td>
      <td>-0.089476</td>
      <td>-2.423715</td>
    </tr>
    <tr>
      <th>BEME3</th>
      <td>0.004672</td>
      <td>-0.000260</td>
      <td>-0.378600</td>
      <td>1.030771</td>
      <td>52.346628</td>
      <td>0.088867</td>
      <td>2.122085</td>
    </tr>
    <tr>
      <th>BEME4</th>
      <td>0.004645</td>
      <td>-0.000993</td>
      <td>-1.187726</td>
      <td>1.024028</td>
      <td>46.748675</td>
      <td>0.244269</td>
      <td>5.454014</td>
    </tr>
    <tr>
      <th>BEME5</th>
      <td>0.004529</td>
      <td>-0.001320</td>
      <td>-1.538633</td>
      <td>0.965618</td>
      <td>46.760283</td>
      <td>0.342533</td>
      <td>7.335649</td>
    </tr>
    <tr>
      <th>BEME6</th>
      <td>0.006041</td>
      <td>-0.000452</td>
      <td>-0.591644</td>
      <td>0.966994</td>
      <td>49.114372</td>
      <td>0.477469</td>
      <td>11.638150</td>
    </tr>
    <tr>
      <th>BEME7</th>
      <td>0.006531</td>
      <td>-0.000669</td>
      <td>-0.939706</td>
      <td>1.010890</td>
      <td>45.301070</td>
      <td>0.586068</td>
      <td>16.803902</td>
    </tr>
    <tr>
      <th>BEME8</th>
      <td>0.007318</td>
      <td>-0.000066</td>
      <td>-0.100727</td>
      <td>1.013915</td>
      <td>57.730463</td>
      <td>0.622277</td>
      <td>16.044578</td>
    </tr>
    <tr>
      <th>BEME9</th>
      <td>0.007988</td>
      <td>0.000035</td>
      <td>0.045016</td>
      <td>1.090035</td>
      <td>53.741509</td>
      <td>0.672105</td>
      <td>18.675487</td>
    </tr>
    <tr>
      <th>BEME10</th>
      <td>0.009536</td>
      <td>0.000369</td>
      <td>0.332300</td>
      <td>1.224648</td>
      <td>37.043688</td>
      <td>0.804089</td>
      <td>13.605419</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>How to think about the CAPM alpha versus the multi-factor alpha?</p></li>
<li><p>Is there a more correct one?</p></li>
<li><p>Does adding a factor reduces ‚Äúmispricing‚Äù?  what does that mean?</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">CAPM</span><span class="o">=</span><span class="n">TSresults</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">FF2</span><span class="o">.</span><span class="n">alpha</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>
<span class="n">CAPM</span><span class="o">.</span><span class="n">alpha</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;FF2&#39;</span><span class="p">,</span><span class="s1">&#39;CAPM&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;alpha&#39;</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;portfolios&#39;</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/leftovers_45_0.png" src="../../_images/leftovers_45_0.png" />
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="bonus-box-a-three-factor-model">
<h3>Bonus Box:  A Three-factor model<a class="headerlink" href="#bonus-box-a-three-factor-model" title="Permalink to this headline">¬∂</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># indentical code as before. Just add the new factor to the regression</span>
<span class="n">FF3</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([],</span><span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;MKT&#39;</span><span class="p">,</span><span class="s1">&#39;HML&#39;</span><span class="p">,</span><span class="s1">&#39;SMB&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span>\
                 <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;avg&#39;</span><span class="p">,</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span><span class="s1">&#39;talpha&#39;</span><span class="p">,</span><span class="s1">&#39;betamkt&#39;</span><span class="p">,</span><span class="s1">&#39;tbetamkt&#39;</span><span class="p">,</span><span class="s1">&#39;betahml&#39;</span><span class="p">,</span><span class="s1">&#39;tbetahml&#39;</span><span class="p">,</span><span class="s1">&#39;betasmb&#39;</span><span class="p">,</span><span class="s1">&#39;tbetasmb&#39;</span><span class="p">])</span> 
<span class="c1"># create dataframe to store residual</span>
<span class="c1"># FF3Resid=df.drop([&#39;MKT&#39;,&#39;HML&#39;,&#39;SMB&#39;],axis=1).copy()</span>
<span class="c1">#store avg return</span>
<span class="n">FF3</span><span class="p">[</span><span class="s1">&#39;avg&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;MKT&#39;</span><span class="p">,</span><span class="s1">&#39;HML&#39;</span><span class="p">,</span><span class="s1">&#39;SMB&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="k">for</span> <span class="n">portfolio</span> <span class="ow">in</span> <span class="n">FF3</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">portfolio</span><span class="p">]</span>
    <span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;MKT&#39;</span><span class="p">,</span><span class="s1">&#39;HML&#39;</span><span class="p">,</span><span class="s1">&#39;SMB&#39;</span><span class="p">]]</span>
    <span class="n">x</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
    <span class="n">FF3</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">portfolio</span><span class="p">,[</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span><span class="s1">&#39;betamkt&#39;</span><span class="p">,</span><span class="s1">&#39;betahml&#39;</span><span class="p">,</span><span class="s1">&#39;betasmb&#39;</span><span class="p">]]</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">values</span>
    <span class="n">FF3</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">portfolio</span><span class="p">,[</span><span class="s1">&#39;talpha&#39;</span><span class="p">,</span><span class="s1">&#39;tbetamkt&#39;</span><span class="p">,</span><span class="s1">&#39;tbetahml&#39;</span><span class="p">,</span><span class="s1">&#39;tbetasmb&#39;</span><span class="p">]]</span><span class="o">=</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">params</span><span class="o">/</span><span class="n">results</span><span class="o">.</span><span class="n">HC0_se</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
<span class="c1">#     FF3Resid[portfolio]=results.resid</span>
    
<span class="n">FF3</span><span class="o">=</span><span class="n">FF3</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span> 
<span class="n">FF3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>avg</th>
      <th>alpha</th>
      <th>talpha</th>
      <th>betamkt</th>
      <th>tbetamkt</th>
      <th>betahml</th>
      <th>tbetahml</th>
      <th>betasmb</th>
      <th>tbetasmb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>BEME1</th>
      <td>0.003225</td>
      <td>0.001743</td>
      <td>2.858402</td>
      <td>0.986598</td>
      <td>55.182834</td>
      <td>-0.536490</td>
      <td>-17.386493</td>
      <td>-0.134760</td>
      <td>-5.312898</td>
    </tr>
    <tr>
      <th>BEME2</th>
      <td>0.004858</td>
      <td>0.000991</td>
      <td>1.583049</td>
      <td>1.010419</td>
      <td>61.038715</td>
      <td>-0.098341</td>
      <td>-2.783742</td>
      <td>-0.040855</td>
      <td>-1.686404</td>
    </tr>
    <tr>
      <th>BEME3</th>
      <td>0.004672</td>
      <td>-0.000190</td>
      <td>-0.283986</td>
      <td>1.034663</td>
      <td>50.746516</td>
      <td>0.083017</td>
      <td>2.074329</td>
      <td>-0.026960</td>
      <td>-0.858285</td>
    </tr>
    <tr>
      <th>BEME4</th>
      <td>0.004645</td>
      <td>-0.000924</td>
      <td>-1.107970</td>
      <td>1.027891</td>
      <td>44.083883</td>
      <td>0.238463</td>
      <td>5.286738</td>
      <td>-0.026757</td>
      <td>-0.827511</td>
    </tr>
    <tr>
      <th>BEME5</th>
      <td>0.004529</td>
      <td>-0.001088</td>
      <td>-1.301458</td>
      <td>0.978513</td>
      <td>44.493451</td>
      <td>0.323152</td>
      <td>7.466797</td>
      <td>-0.089319</td>
      <td>-2.460703</td>
    </tr>
    <tr>
      <th>BEME6</th>
      <td>0.006041</td>
      <td>-0.000400</td>
      <td>-0.526854</td>
      <td>0.969879</td>
      <td>47.707327</td>
      <td>0.473133</td>
      <td>11.590126</td>
      <td>-0.019985</td>
      <td>-0.688658</td>
    </tr>
    <tr>
      <th>BEME7</th>
      <td>0.006531</td>
      <td>-0.000670</td>
      <td>-0.937915</td>
      <td>1.010806</td>
      <td>45.789553</td>
      <td>0.586194</td>
      <td>16.506778</td>
      <td>0.000584</td>
      <td>0.022704</td>
    </tr>
    <tr>
      <th>BEME8</th>
      <td>0.007318</td>
      <td>-0.000537</td>
      <td>-0.920447</td>
      <td>0.987756</td>
      <td>62.376607</td>
      <td>0.661595</td>
      <td>24.375635</td>
      <td>0.181196</td>
      <td>6.793609</td>
    </tr>
    <tr>
      <th>BEME9</th>
      <td>0.007988</td>
      <td>-0.000443</td>
      <td>-0.617529</td>
      <td>1.063450</td>
      <td>54.156043</td>
      <td>0.712062</td>
      <td>22.735360</td>
      <td>0.184141</td>
      <td>6.724677</td>
    </tr>
    <tr>
      <th>BEME10</th>
      <td>0.009536</td>
      <td>-0.000783</td>
      <td>-0.891318</td>
      <td>1.160606</td>
      <td>48.446541</td>
      <td>0.900347</td>
      <td>23.345170</td>
      <td>0.443602</td>
      <td>13.312943</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="additional-discussion">
<h1>Additional discussion<a class="headerlink" href="#additional-discussion" title="Permalink to this headline">¬∂</a></h1>
<div class="section" id="portfolio-implications-of-the-equilibrium-view">
<h2>Portfolio implications of the equilibrium view<a class="headerlink" href="#portfolio-implications-of-the-equilibrium-view" title="Permalink to this headline">¬∂</a></h2>
<ul class="simple">
<li><p>If you are like the average investor, you should simply hold the market portfolio</p></li>
<li><p>You deviate from holding the market only if you are different from the average investor</p></li>
<li><p>Examples with preferences:</p>
<ul>
<li><p>If you are more risk-averse than the average investor you should hold some safe bonds as well</p></li>
<li><p>If you are more risk-tolerant you should borrow and invest more in the market than the average investor</p></li>
</ul>
</li>
<li><p>Example with ‚ÄúBackground risk‚Äù:(background risks are risks that investors are exposed to indepedently of their financial portfolio)</p>
<ul>
<li><p>If you work in the automobile industry and your skill set is highly specialized to automobiles, you are more exposed to the automobile industry risk than the average investor.</p></li>
<li><p>Advice is to hold the market <em>after you hedge your automobile exposure</em></p></li>
<li><p>in practice this could be investing in the market portoflio while avoiding auto-indistry stocks (and other stocks that are strongly correlated with it)</p></li>
</ul>
</li>
<li><p>This logic extends to multipl-factors as well, as we will see.</p>
<ul>
<li><p>So even if the CAPM does not work and you need addiitonal factors to explain differences in expected returns across assets, the equilbrium view still implies that if you are just like the average investors, you should simply hold the market portfolio.</p></li>
<li><p>So you will tilt your portfolio to a high expected return factor only if you are less exposed to it than the average investor</p></li>
<li><p>The intuition here is that this factor earns high returns relative to the CAPM because it earns fair compensation for risks that the average investors are exposed to</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="quantitative-investing-is-going-from-names-to-characteristics">
<h2>Quantitative investing is going from ‚Äúnames‚Äù  to characteristics<a class="headerlink" href="#quantitative-investing-is-going-from-names-to-characteristics" title="Permalink to this headline">¬∂</a></h2>
<p>The  sorting by date keeps the stocks inside the portfolios with similar characteristics</p>
<ul class="simple">
<li><p>This sorting will ‚Äúwork‚Äù if these chracteristics are good proxies for risks that the average investor cares about</p>
<ul>
<li><p>will lead to spread in returns</p></li>
<li><p>will lead to a factor</p></li>
</ul>
</li>
<li><p>But it doesn‚Äôt work always, if you use the first letter of stock ticker to construct 26 portfolios you are unlikely to get spread in average returns and most likely each portfolio will resemble the market portfolio but with much more volatility.</p></li>
<li><p>And even if you do find something‚Äì&gt; likely garbage, very hard to think about an economic model that would deliver that pattern!</p></li>
</ul>
<p>Lets look at the portfolios‚Äô characteristics, i.e. Size, Book-to-Market, momentum,‚Ä¶ of the different portfolios</p>
<ul class="simple">
<li><p>These are the characterisitcs that were used to create the portfolios.</p></li>
<li><p>Indeed, the key is that each portfolio has stocks of vastly different characterisitcs and keeps churning as firms change</p>
<ul>
<li><p>Let‚Äôs take MSFT (microsoft) as an example:</p></li>
<li><p>MSFT transitioned from being small in the 80‚Äôs to be gigantic in the 90‚Äôs, as a result, it moved up from the small portfolio to the big portfolio</p></li>
<li><p>Duing the Tech boom when MSFT had a huge valuation relative to it‚Äôs book value, it went to the low BM portfolio</p></li>
<li><p>But then MSFT transtioned back to the high BM portfolio once it‚Äôs market valuation collapsed in the aftermath of the techbubble</p></li>
</ul>
</li>
<li><p>The key is that firms‚Äô characteristics change over time, by constructing  portfolios, we hope to estimate some stable relationship between risk and return</p></li>
<li><p>The fact that the market value is above or below the book value does not mean that the firm is mispriced. It is natural that the expectation of future earnings changed (which is not in book value), or investors‚Äô perception of risk changed.</p></li>
<li><p>Even in a CAPM world you can see that happening: suppose the beta of a firm increases, then in equilibrium it‚Äôs excess return must also increase!</p>
<ul>
<li><p>This would mean if it‚Äôs market value goes down, Book-to-Market would go up at the same time, making expected returns going forward go up!</p></li>
<li><p>But in the data we see when BM changes (as firms swing across portfolios), the market beta does not, which is inconsitent with the CAPM</p></li>
</ul>
</li>
<li><p>Expected return alone is not a puzzle (for the CAPM). All puzzles are joint puzzles of expected return and beta ‚Äî either high expected returns not matched with high betas, or high/low betas not matched with expected returns.</p></li>
<li><p>The lower residual risk provides you a sharper exploration of the model mistakes</p></li>
<li><p>There is always a way to make small-looking errors big (and profitable.)</p></li>
</ul>
</div>
<div class="section" id="why-test-with-portfolios-rather-than-just-look-at-stocks">
<h2>Why test with portfolios rather than just look at stocks?<a class="headerlink" href="#why-test-with-portfolios-rather-than-just-look-at-stocks" title="Permalink to this headline">¬∂</a></h2>
<ol class="simple">
<li><p>Individual stocks have <span class="math notranslate nohighlight">\(\sigma\)</span> = 40 ‚àí 80%, so <span class="math notranslate nohighlight">\(\sigma/\sqrt{T}\)</span> makes it
nearly impossible to accurately measure E(R). Portfolios have lower <span class="math notranslate nohighlight">\(\sigma\)</span> by diversification.</p></li>
<li><p>Betas are badly measured too, and vary over time.</p>
<ul class="simple">
<li><p>Example: every firm starts small and risky, but eventually some of them become big and safe</p></li>
</ul>
</li>
<li><p>You need an interesting alternative. Group stocks together that might have a violation,
this gives much more power.</p></li>
<li><p>This is what people do to (try to) make money. They don‚Äôt randomly buy stocks.
They buy stocks with certain characteristics that they think will outperform. Thus,
keep tests and practice close.</p></li>
<li><p>The CAPM seemed fine (and still does) until stocks were grouped by B/M. The
CAPM still works fine for some groupings (size), not others (value) .</p></li>
</ol>
<p>But of course you need to know how to form portfolios based on which characteristcs to use.</p>
<p>And here the sky is the limit, as long you are careful about false discovery!</p>
<p>Examples:</p>
<ul class="simple">
<li><p>Stocks talked about in the media</p></li>
<li><p>Stocks of CEOs tweeted by the President</p></li>
<li><p>Stocks with recent deal annoucements</p></li>
<li><p>Stocks with a lot of google search traffic (google trends)</p></li>
<li><p>Stocks with a lot of Tweeter activity</p></li>
<li><p>Stocks that are investing a lot</p></li>
<li><p>Stocks that are very profitable</p></li>
<li><p>Stocks that doing a lot of R&amp;D</p></li>
<li><p>Stocks invested by famous hedge fund managers</p></li>
<li><p>Stocks invested by less famous managers</p></li>
<li><p>Stokcs invested by Warren Buffet</p></li>
</ul>
</div>
<div class="section" id="economic-vs-statistical-rejection">
<h2>Economic vs statistical rejection<a class="headerlink" href="#economic-vs-statistical-rejection" title="Permalink to this headline">¬∂</a></h2>
<p>We see that the FF3 reduces pricing erros by a lot.</p>
<ul class="simple">
<li><p>Variation in the betas of the 3 factor model can explain much more of the variation in average returns across assets</p></li>
</ul>
<p>Asset pricing tests are always about Sharpe ratios</p>
<ul class="simple">
<li><p>The FF3 model explains much more of the variation in average returns‚Äì that is true‚Äì but at the same time explains also a lot of the variation in realized returns</p></li>
<li><p>This means that the unexplained risk is much smaller‚Äì making Appraisal ratios not that different from the CAPM.</p></li>
</ul>
<p>For a practioner: it is very different to have SR of 1 with an alpha of 5%, vs SR of 1 with alpha of 0.5%</p>
<ul class="simple">
<li><p>Why?</p></li>
<li><p>Because you will have to use much more leverage to exploit mispricing from the FF3 model!</p></li>
<li><p>The t-stats test treats these two things as equal, but they are only the same if you don‚Äôt face any costs of leveraging up</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters/Finance"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Alan Moreira<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>