
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Assignment 7 &#8212; Quantitative Investing</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/book.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://amoreira2.github.io/quantitativeinvesting/chapters/Assignments/Assignment7.html" />
    <link rel="shortcut icon" href="../../_static/figuremain2.jpg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/figuremain2.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Quantitative Investing</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01/what-is-quant-investing.html">
   1. What is Quantitative Investing?
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/statistical-techniques.html">
     1.1. Statistical Techniques
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/computational-tools.html">
     1.2. Computational tools
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02/getting_started.html">
   2. Getting Started
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/local_install.html">
     2.3. Local installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/cloud_setup.html">
     2.4. Cloud Setup
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../03/programming-in-python.html">
   3. First Steps with Python
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../essentials/essentials.html">
   4. Python Essentials
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../essentials/basics.html">
     4.1. Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../essentials/collections.html">
     4.2. Collections
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../essentials/control_flow.html">
     4.3. Flow control
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../essentials/functions.html">
     4.4. Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../essentials/numpy1.html">
     4.5. Numpy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../essentials/plotting1.html">
     4.6. Plotting
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../pandas/workingwithdata.html">
   5. Working with Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/intro.html">
     5.1. Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/basics.html">
     5.2. Pandas Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/the_index.html">
     5.3. Indexing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/timeseries.html">
     5.4. Time-Series
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/data_clean.html">
     5.5. Cleaning data (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/reshape.html">
     5.6. Reshape (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/merge.html">
     5.7. Merge (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/groupby.html">
     5.8. Group-by (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/matplotlib.html">
     5.9. Plotting (opt)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pandas/storage_formats.html">
     5.10. Data Storage (opt)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Finance/Returns.html">
   6. Asset Returns
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/Returns1.html">
     6.1. Returns
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../scientific/randomness1.html">
     6.2. Modeling randomness
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/TheChoiceofFrequency.html">
     6.3. The Choice of Frequency and Annualization of Returns
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../scientific/linear_algebra1.html">
     6.4. Linear algebra Review
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/UsingAPI.html">
     6.5. Data APIs
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Finance/PortfolioMath.html">
   7. Portfolio Math
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Finance/CapitalAllocationLine.html">
   8. Capital Allocation
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Finance/meanvariance1.html">
   9. Mean Variance Frontier
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/MeanVariance.html">
     9.1. Mean Variance Efficient Portfolios
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/CaseStudy.html">
     9.2. Case Study in International Diversification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/LeverageandShorting.html">
     9.3. Leverage and Shorting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/Portfoliooptimizationwithconstraints.html">
     9.4. Portfolio Optimization with constraints
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Finance/EstimationUncertainty.html">
   10. Estimation Uncertainty and It's Implications for investing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Finance/TradingStrategies.html">
   11. Trading Strategies
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Finance/Timing.html">
   12. Timing Strategies
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/Volatilitytiming.html">
     12.1. Volatility Timing
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Finance/crosssectionalequitystrategies.html">
   13. Cross-Sectional Equity Strategies
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/Valueinvesting.html">
     13.1. Value
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/Momentum.html">
     13.2. Momentum
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/OtherEquityStrategies.html">
     13.3. Other Equity strategies
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Finance/Evaluation.html">
   14. Evaluating a Trading Strategy
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/Econometrics.html">
     14.1. The Econometrics of Strategy Evalaution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/outofsample.html">
     14.2. Out of Sample Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/TailandBackground.html">
     14.3. Tail Risks and Background Risks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/MultiFactorModels.html">
     14.4. Multifactor Models
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Finance/Topics.html">
   15. Topics in Quantitative Investing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/Equilbrium.html">
     15.1. Intepreting Factor models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/Implementation.html">
     15.2. Strategy Implementation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finance/Horizon.html">
     15.3. Investment horizon effects
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../additional/additional.html">
   16. Additional Statistics Material
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Assignments.html">
   17. Assignments
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Assignment0.html">
     17.1. Assigment 0
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/chapters/Assignments/Assignment7.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/amoreira2/Lectures"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/amoreira2/Lectures/issues/new?title=Issue%20on%20page%20%2Fchapters/Assignments/Assignment7.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/amoreira2/Lectures/main?urlpath=tree/chapters/Assignments/Assignment7.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/amoreira2/Lectures/blob/main/chapters/Assignments/Assignment7.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Assignment 7
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#write-your-names-and-simon-emails">
     Write your names and simon emails
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   Exercises
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="assignment-7">
<h1>Assignment 7<a class="headerlink" href="#assignment-7" title="Permalink to this headline">¶</a></h1>
<p>Instructions: This problem set should be done in a <strong>group</strong>.</p>
<p>Your group was assigned at orientation and you can find it in blackbaord as well.</p>
<p>You will use this same group to do your final project.</p>
<p>Answer each question in the designated space below.</p>
<p>After you are done, save and upload in blackboard.</p>
<p>Please check that you are submitting the correct file. One way to avoid mistakes is to save it with a different name.</p>
<p>Comments:</p>
<ul class="simple">
<li><p>Make sure that everything is compiled before saving it.</p></li>
<li><p>Obviously feel free to add as many cells as needed in each section.</p></li>
<li><p>Cells should not be too large. Keep code organized and clean.</p></li>
</ul>
<div class="section" id="write-your-names-and-simon-emails">
<h2>Write your names and simon emails<a class="headerlink" href="#write-your-names-and-simon-emails" title="Permalink to this headline">¶</a></h2>
<p>Please write names below:</p>
<ul class="simple">
<li><p>[Name,email]:</p></li>
<li><p>[Name,email]:</p></li>
<li><p>[Name,email]:</p></li>
<li><p>[Name,email]:</p></li>
<li><p>[Name,email]:</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="exercises">
<h1>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h1>
<p><strong>2.1</strong></p>
<p>In order to proceed you need the file <code class="docutils literal notranslate"><span class="pre">url=&quot;https://github.com/amoreira2/Lectures/blob/main/assets/data/crspm2005_2020.pkl?raw=true&quot;</span></code>.</p>
<p>Start by importing the data, parsing the date appropriately.</p>
<p>Using the momentum code we developed in chapter 13.2 as a starting point, I would like you to make it a general function that takes the following parameters as inputs:</p>
<ul class="simple">
<li><p>lookback period.</p></li>
<li><p>how many months to skip between signal and portfolio formation.</p></li>
<li><p>number of groups, i.e., the number of portfolios.</p></li>
<li><p>weighting scheme: equal-weighted, market-cap-weighted (aka value-weighted), volume-weighted.</p></li>
</ul>
<p>The signal is the cumulative returns in the lookback window.</p>
<p>The code should output <strong>a time-series of returns</strong> of the portfolio that goes long the top group (the one in the top of the signal distribution) and shorts the bottom group (the one with stocks from the bottom of the signal distribution).</p>
<p>Name this function <code class="docutils literal notranslate"><span class="pre">strategy</span></code>.</p>
<p>TIP:</p>
<p>This is the same data set that we used in Chapter 13.1 to build market cap weights. So you should look there how things were set up and of course, this is the same dataset we used in Chapter 13.2.</p>
<p>It is your responsibility to import this properly and adjust to any aspects of the dataset. For example, make sure you take absolute values of price to ensure that market cap is positive.</p>
<p><strong>2.2</strong></p>
<p>We will now show that the code works. Do a for loop, where you skip <strong>one</strong> month (and not two!), and you grow the lookback period from 1 to 60 months. Record the Sharpe Ratio of long-short portfolio for each of these lookbacks. Plot the SR of the long-short portfolio as a function of the lookback period (y-axis SR, x-axis lookback period).</p>
<p>Discuss what you found.</p>
<p>TIP: This code is likely to run for several minutes. First do it for a list of several months (e.g., 1, 3, 6, 12 months) and then after verifying that the code works, extend it to all months between 1 and 60.</p>
<p><strong>2.3</strong></p>
<p>Repeat what you did in 2.2, but now skipping 2 months.</p>
<p>Discuss what you found.</p>
<p><strong>2.4</strong></p>
<p>Do a for loop, where you do the standard momentum strategy (lookback 10, skip 2 months) using the following number of groups:  2, 3, 5, 10, 20, and 50. Record the <strong>Sharpe Ratio</strong> of long-short portfolio for each of these. Plot the SR as a function of the number of groups.</p>
<p>Discuss what you found.</p>
<p><strong>2.5</strong></p>
<p>Show that your code works, by doing a for loop, where you do the standard momentum strategy (lookback 10, skip 2, 10 groups) using all the <strong>three weighting schemes</strong> (Equal weighted, Value weighted and Volume weighted). Record and plot the Sharpe ratio.</p>
<p>Discuss what you found.</p>
<p><strong>2.6</strong></p>
<p>Does our strategy beat the CAPM?</p>
<p><strong>The goal here is to construct a function</strong> that for a given time-series of a strategy excess returns estimates the strategy alpha and beta with respect to the market excess return. It then reports the following objects:</p>
<ol class="simple">
<li><p>Annualized average excess returns.</p></li>
<li><p>Annualized standard deviation.</p></li>
<li><p>Annualized Sharpe Ratio.</p></li>
<li><p>CAPM Beta.</p></li>
<li><p>Annualized CAPM alpha.</p></li>
<li><p>Annualized Appraisal ratio.</p></li>
<li><p>Maximum Sharpe Ratio obtained by investing optimally in the strategy and the market.</p></li>
<li><p>Annualized standard deviation of strategy systematic risk.</p></li>
<li><p>Annualized standard deviation of the strategy idiosyncratic risk</p></li>
</ol>
<p>To do so you will need to import also the market portfolio from this data set <code class="docutils literal notranslate"><span class="pre">url=&quot;https://raw.githubusercontent.com/amoreira2/Lectures/main/assets/data/MonthlyFactors.csv&quot;</span></code> and merge with the time-series returns of your strategy.</p>
<p>TIPS:</p>
<ul class="simple">
<li><p>To do that you will need to first construct your portfolios (so you have a time-series of returns for each), and then in the end, once you have the different portfolios in the columns and the dates in the rows, you will merge on date with the data frame that has the market returns.</p></li>
<li><p>It is very important that you import the monthly factors data set correctly for the merge to work.</p></li>
<li><p>We have done that multiple times by now.</p></li>
<li><p>aAlso make sure that these returns are in the same units as your portfolio.</p></li>
</ul>
<p>The function should look like that</p>
<p><code class="docutils literal notranslate"><span class="pre">output=perfeval(df,factor)</span></code>,</p>
<p>where df is a dataframe containing your strategy excess returns or long-short returns, output is a Dataframe with 9 columns containing the desired outputs (name each column properly), and factor is the dataframe containing the market <strong>excess</strong> return. Please note that the data has <strong>the market returns</strong> and you need to compute the market excess return before merging.</p>
<p>The function must merge df and factor, then run an OLS regression, and the output the desired quantities above.</p>
<p>Show that the function works by applying it to the standard Momentum strategy with value-weighted scheme (where you should simply use two functions, one built in question 2.1 to construct the strategy and then the function that you have just built to do performance evaluation).</p>
<p><strong>2.7</strong></p>
<p>Now you have two functions. The first function constructs a strategy, the second evaluates.</p>
<p>Propose  an algorithm that searches across the parameters of your strategy function for the best strategy across your dimension(s) of choice. (No need to actually do it)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">perfeval</span></code> function outputs several performance metrics. Choose one or combinations of the various metrics. Please explain your choice of metric. Explain briefly the idea behind your search algorithm.</p>
<p><strong>2.8</strong></p>
<p>What is  the main pitfall/weakness of the approach taken in Question 2.7 to find the best strategy?</p>
<p>Explain how you could modify this approach to improve the methodology with respect to this weakness (no need to do it!).</p>
<p><strong>2.9</strong></p>
<p>Can you change the strategy function that you built in question 2.1 to construct portfolios based on the last N months volatility?</p>
<p>Demonstrate that it works by applying the strategy function to 10 groups using a rolling window of 24 months to estimate the volatility signal. Use market cap weights.</p>
<p><strong>2.10</strong></p>
<p>Compute the expected returns, volatilities and Sharpe ratios of the 10 portfolios, formed on volatility using the code from the previous exercise. Discuss your findings.</p>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters/Assignments"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Alan Moreira<br/>
        
            &copy; Copyright 2021 Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0).<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>